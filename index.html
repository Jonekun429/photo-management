<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cleaner App</title>
<style>
:root {
  --bg:         #0a100e;
  --card:       #111f1b;
  --card-2:     #162520;
  --border:     rgba(0,180,130,0.10);
  --text:       #e6f5f1;
  --text-sub:   #5e9c89;
  --primary:    #005D4D;
  --mid:        #007a65;
  --accent:     #00e8b5;
  --danger:     #e05252;
  --dnk:        #c03c3c;
  --keep:       #007a65;
  --keepdk:     #005D4D;
  --gold:       #ffd166;
  --bdark:      rgba(0,0,0,0.62);
}
*{box-sizing:border-box;margin:0;padding:0;-webkit-tap-highlight-color:transparent;font-family:-apple-system,BlinkMacSystemFont,"Hiragino Sans","Noto Sans JP",sans-serif;}
body{background:#000;display:flex;justify-content:center;height:100vh;overflow:hidden;}
#app{width:100%;max-width:480px;height:100%;background:var(--bg);color:var(--text);display:flex;flex-direction:column;margin:0 auto;position:relative;}

/* â”€â”€ ãƒ˜ãƒƒãƒ€ãƒ¼ â”€â”€ */
header{padding:36px 18px 14px;display:flex;flex-direction:column;gap:10px;background:var(--bg);flex-shrink:0;z-index:20;border-bottom:1px solid var(--border);}
.hdr-top{display:flex;justify-content:space-between;align-items:center;min-height:34px;}
.back-btn{font-size:17px;cursor:pointer;display:none;color:var(--accent);font-weight:700;}
.hdr-actions{display:none;gap:8px;align-items:center;}
.pill-btn{background:rgba(0,200,154,0.12);border:1px solid rgba(0,200,154,0.25);color:var(--accent);border-radius:20px;padding:7px 14px;font-size:12px;font-weight:700;cursor:pointer;display:flex;align-items:center;gap:5px;}
.hdr-title-row{display:flex;align-items:flex-end;gap:10px;}
h1{font-size:25px;font-weight:800;letter-spacing:-.3px;}
.hdr-sub{font-size:12px;color:var(--text-sub);display:none;padding-bottom:2px;}

/* â”€â”€ ã‚½ãƒ¼ãƒˆãƒœã‚¿ãƒ³ â”€â”€ */
.sort-btn{background:rgba(0,200,154,0.10);border:1px solid rgba(0,200,154,0.22);color:var(--accent);width:34px;height:34px;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;flex-shrink:0;}
.sort-btn svg{width:16px;height:16px;fill:none;stroke:currentColor;stroke-width:2;stroke-linecap:round;}

/* â”€â”€ ã‚½ãƒ¼ãƒˆãƒœãƒˆãƒ ã‚·ãƒ¼ãƒˆ â”€â”€ */
.sort-overlay{position:absolute;inset:0;background:rgba(0,0,0,.55);z-index:60;display:none;backdrop-filter:blur(2px);}
.sort-overlay.open{display:block;}
.sort-sheet{position:absolute;bottom:0;left:0;right:0;background:#162a24;border-radius:22px 22px 0 0;padding:0 0 20px;z-index:61;transform:translateY(100%);transition:transform .3s cubic-bezier(.25,.8,.25,1);}
.sort-overlay.open .sort-sheet{transform:translateY(0);}
.sort-handle{width:36px;height:4px;background:rgba(255,255,255,.18);border-radius:2px;margin:12px auto 4px;}
.sort-title{font-size:13px;font-weight:700;color:var(--text-sub);text-transform:uppercase;letter-spacing:1px;padding:8px 20px 12px;border-bottom:1px solid var(--border);}
.sort-option{display:flex;align-items:center;justify-content:space-between;padding:16px 20px;cursor:pointer;transition:background .15s;font-size:15px;font-weight:500;}
.sort-option:active{background:rgba(0,200,154,.06);}
.sort-option .sort-check{width:22px;height:22px;border-radius:50%;border:2px solid rgba(255,255,255,.2);display:flex;align-items:center;justify-content:center;font-size:12px;color:transparent;transition:all .2s;}
.sort-option.active .sort-check{background:var(--accent);border-color:var(--accent);color:#0a100e;font-weight:900;}

/* â”€â”€ ãƒ“ãƒ¥ãƒ¼ â”€â”€ */
.view{flex:1;overflow-y:auto;padding:16px;display:none;}
.view.active{display:block;}

/* å‰Šé™¤ãƒãƒ¼ï¼ˆã‚¹ãƒ¯ã‚¤ãƒ—è©³ç´°ã§ã¯éè¡¨ç¤ºï¼‰ */
.del-bar{position:fixed;bottom:84px;left:50%;transform:translateX(-50%) translateY(150%);width:100%;max-width:480px;padding:0 16px;display:flex;justify-content:center;z-index:30;transition:transform .32s cubic-bezier(.25,.8,.25,1);pointer-events:none;}
.del-bar.show{transform:translateX(-50%) translateY(0);pointer-events:auto;}
.del-bar.hidden-force{display:none !important;}
.btn-del{width:100%;padding:15px 20px;background:linear-gradient(135deg,var(--danger),var(--dnk));color:#fff;border:none;border-radius:16px;font-size:15px;font-weight:700;cursor:pointer;box-shadow:0 6px 24px rgba(224,82,82,.4);display:flex;justify-content:center;align-items:center;gap:8px;}

/* å…±é€šã‚»ãƒ¬ã‚¯ã‚¿ãƒ–ãƒ« */
.sel-item{position:relative;cursor:pointer;border:2px solid transparent;transition:transform .1s,opacity .1s;overflow:hidden;background:var(--card);}
.sel-item.selected{transform:scale(.91);opacity:.75;border-radius:12px;}
.chk{position:absolute;bottom:8px;right:8px;width:22px;height:22px;border:2px solid rgba(255,255,255,.7);border-radius:6px;display:flex;align-items:center;justify-content:center;color:transparent;font-size:13px;font-weight:800;background:rgba(0,0,0,.25);z-index:10;transition:all .2s;}
.sel-item.selected .chk{background:var(--danger);border-color:var(--danger);color:#fff;}

/* ãƒãƒƒã‚¸ */
.bdg-top{position:absolute;top:7px;left:7px;background:var(--bdark);border:1px solid rgba(255,255,255,.25);color:#fff;font-size:9px;font-weight:800;padding:2px 6px;border-radius:4px;z-index:2;letter-spacing:.5px;}
.bdg-bot{position:absolute;bottom:7px;left:7px;background:var(--bdark);color:#fff;font-size:11px;font-weight:700;padding:3px 6px;border-radius:4px;z-index:2;}
.vid-bdg{position:absolute;bottom:7px;left:7px;background:rgba(0,93,77,.85);border-radius:6px;padding:4px 7px;display:flex;flex-direction:column;z-index:2;}
.vid-bdg .vs{font-size:12px;font-weight:700;color:#fff;line-height:1.2;}
.vid-bdg .vd{font-size:10px;color:var(--accent);line-height:1.2;}

/* â”€â”€ ãƒ›ãƒ¼ãƒ  â”€â”€ */
.sto-row{display:flex;justify-content:space-between;font-size:12px;margin-bottom:8px;}
.sto-row .used{color:var(--accent);font-weight:700;}
.sto-row .pct{color:var(--text-sub);}
.prog-track{width:100%;height:6px;background:var(--card);border-radius:3px;margin-bottom:20px;overflow:hidden;}
.prog-fill{width:82%;height:100%;background:linear-gradient(90deg,var(--primary),var(--accent));border-radius:3px;}
.home-grid{display:grid;grid-template-columns:1fr 1fr;gap:12px;}
.home-card{border-radius:20px;height:150px;position:relative;overflow:hidden;display:flex;flex-direction:column;justify-content:flex-end;padding:14px;cursor:pointer;background-size:cover;background-position:center;transition:transform .2s;}
.home-card:active{transform:scale(.97);}
.home-card::before{content:'';position:absolute;inset:0;background:linear-gradient(to top,rgba(0,0,0,.88) 0%,rgba(0,0,0,.18) 55%,transparent 100%);z-index:1;}
.home-card::after{content:'';position:absolute;inset:0;background:rgba(0,93,77,.18);z-index:1;}
.hc-inner{position:relative;z-index:2;}
.home-card h3{font-size:12px;font-weight:500;color:rgba(255,255,255,.8);margin-bottom:3px;}
.home-card p{font-size:20px;font-weight:800;color:#fff;letter-spacing:-.5px;}
.home-card.photos     {background-color:#fdf5ff;}
.home-card.raw        {background-color:#fff5e0;}
.home-card.videos     {background-color:#fff0e8;}
.home-card.screenshots{background-color:#e8f8ff;}

/* â”€â”€ ãƒ¡ãƒ‡ã‚£ã‚¢ã‚°ãƒªãƒƒãƒ‰ï¼ˆå¤§ãã‚ 2åˆ—ï¼‰ â”€â”€ */
.media-grid{display:grid;grid-template-columns:1fr 1fr;gap:8px;padding-bottom:100px;}
.media-item{border-radius:14px;aspect-ratio:1/1;position:relative;}
.media-item img{width:100%;height:100%;object-fit:cover;display:block;border-radius:inherit;}

/* â”€â”€ ä¼¼ã¦ã„ã‚‹å†™çœŸ â”€â”€ */
.sim-group{margin-bottom:26px;}
.sim-group-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px;}
.sim-group-title{font-size:14px;font-weight:700;}
.grp-sel-btn{font-size:12px;color:var(--text-sub);cursor:pointer;}
.sim-scroll{display:flex;overflow-x:auto;gap:10px;padding-bottom:8px;scroll-snap-type:x mandatory;}
.sim-scroll::-webkit-scrollbar{height:3px;}
.sim-scroll::-webkit-scrollbar-thumb{background:var(--card-2);border-radius:2px;}
.sim-best{flex:0 0 148px;aspect-ratio:3/4;border-radius:14px;position:relative;overflow:hidden;scroll-snap-align:start;}
.sim-best img{width:100%;height:100%;object-fit:cover;}
.best-lbl{position:absolute;bottom:8px;left:8px;background:rgba(0,93,77,.92);color:#fff;font-size:11px;font-weight:700;padding:4px 8px;border-radius:6px;z-index:2;display:flex;align-items:center;gap:3px;}
.best-lbl .star{color:var(--accent);}
.sim-sub{flex:0 0 110px;aspect-ratio:3/4;scroll-snap-align:start;}

/* â”€â”€ ã‚¹ãƒ¯ã‚¤ãƒ—æœˆä¸€è¦§ â”€â”€ */
.swipe-list-hdr{margin-bottom:14px;}
.swipe-list-hdr h2{font-size:20px;font-weight:800;}
.swipe-list-hdr p{font-size:12px;color:var(--text-sub);margin-top:3px;}
.month-list{display:flex;flex-direction:column;gap:8px;padding-bottom:20px;}
.month-row{background:var(--card);border-radius:14px;overflow:hidden;cursor:pointer;transition:transform .15s;border:1px solid var(--border);position:relative;}
.month-row:active{transform:scale(.975);}
.month-row-inner{display:flex;align-items:center;gap:10px;padding:12px 14px;}
.month-thumb-img{width:52px;height:52px;border-radius:10px;object-fit:cover;background:var(--card-2);flex-shrink:0;}
.month-text{flex:1;min-width:0;}
.month-lbl{font-size:14px;font-weight:700;margin-bottom:2px;}
.month-cnt{font-size:11px;color:var(--text-sub);margin-bottom:6px;}
.month-bar-wrap{width:100%;height:3px;background:rgba(255,255,255,.08);border-radius:2px;overflow:hidden;}
.month-bar-fill{height:100%;border-radius:2px;background:linear-gradient(90deg,var(--mid),var(--accent));}
.month-badge-wrap{flex-shrink:0;width:40px;height:40px;border-radius:50%;display:flex;align-items:center;justify-content:center;}
.month-badge-wrap.done{background:radial-gradient(circle at 40% 35%,#fff8d6,#ffd700 60%,#c8930a);box-shadow:0 0 12px rgba(255,215,0,.5);animation:glow 2.5s ease-in-out infinite;font-size:18px;}
.month-badge-wrap.pend{background:rgba(255,255,255,.05);border:1.5px solid rgba(255,255,255,.08);}
.pend-pct{font-size:11px;font-weight:700;color:var(--text-sub);}
@keyframes glow{0%,100%{box-shadow:0 0 10px rgba(255,215,0,.36);}50%{box-shadow:0 0 20px rgba(255,215,0,.72);}}
.month-row.done-row{background:linear-gradient(135deg,#0e2420,#122b25);border-color:rgba(0,200,140,.15);}
.month-row.done-row .month-lbl{color:var(--accent);}
.done-bar{height:2px;background:linear-gradient(90deg,rgba(0,232,181,.45),transparent);}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ã‚¹ãƒ¯ã‚¤ãƒ—è©³ç´° â€” å®Œå…¨ç‹¬ç«‹ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ
   del-barã¨ã¯ç„¡é–¢ä¿‚
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#swipe-detail{display:none;flex-direction:column;position:absolute;inset:0;background:var(--bg);z-index:50;}
#swipe-detail.active{display:flex;}

.sd-header{padding:44px 16px 0;display:flex;flex-direction:column;gap:0;background:var(--bg);flex-shrink:0;border-bottom:1px solid var(--border);}
.sd-top{display:flex;align-items:center;justify-content:space-between;margin-bottom:10px;}
.sd-back{color:var(--accent);font-size:15px;font-weight:700;cursor:pointer;display:flex;align-items:center;gap:4px;padding:4px 0;}
.sd-title{font-size:16px;font-weight:700;}
.sd-share{background:rgba(0,200,154,.12);border:1px solid rgba(0,200,154,.25);color:var(--accent);border-radius:14px;padding:6px 12px;font-size:12px;font-weight:700;cursor:pointer;}
.sd-prog-row{display:flex;align-items:center;gap:10px;padding:10px 0 12px;}
.sd-prog-track{flex:1;height:5px;background:rgba(255,255,255,.1);border-radius:3px;overflow:hidden;}
.sd-prog-fill{height:100%;background:linear-gradient(90deg,var(--mid),var(--accent));border-radius:3px;transition:width .4s;}
.sd-prog-txt{font-size:11px;color:var(--accent);font-weight:700;white-space:nowrap;}

/* å†™çœŸã‚¨ãƒªã‚¢ */
.sd-photo-area{flex:1;display:flex;align-items:center;justify-content:center;padding:12px 16px;overflow:hidden;min-height:0;}
.sd-photo-card{width:100%;border-radius:20px;overflow:hidden;position:relative;box-shadow:0 12px 40px rgba(0,0,0,.6);}
.sd-photo-card img{width:100%;display:block;max-height:calc(100vh - 300px);object-fit:cover;border-radius:20px;}
.sd-photo-meta{position:absolute;top:12px;left:12px;background:rgba(0,0,0,.55);border-radius:8px;padding:4px 10px;font-size:11px;color:#fff;}

/* ã‚µãƒ ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒªãƒƒãƒ— */
.sd-strip{flex-shrink:0;padding:0 16px 8px;display:flex;gap:6px;overflow-x:auto;}
.sd-strip::-webkit-scrollbar{display:none;}
.sd-strip-thumb{width:46px;height:46px;border-radius:8px;object-fit:cover;cursor:pointer;opacity:.45;transition:opacity .2s,box-shadow .2s;flex-shrink:0;}
.sd-strip-thumb.active-thumb{opacity:1;box-shadow:0 0 0 2px var(--accent);}

/* å‰Šé™¤ / ä¿æŒãƒœã‚¿ãƒ³ï¼ˆã‚¹ãƒ¯ã‚¤ãƒ—è©³ç´°å°‚ç”¨ãƒ»del-barã¨ã¯åˆ¥ï¼‰ */
.sd-actions{flex-shrink:0;padding:10px 18px 18px;display:flex;gap:12px;}
.btn-del-sw{flex:1;padding:16px;background:linear-gradient(135deg,#c0392b,#7b241c);color:#fff;border:none;border-radius:18px;font-size:15px;font-weight:800;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:8px;box-shadow:0 4px 16px rgba(192,57,43,.4);transition:transform .1s;}
.btn-keep-sw{flex:1;padding:16px;background:linear-gradient(135deg,var(--keep),var(--keepdk));color:#fff;border:none;border-radius:18px;font-size:15px;font-weight:800;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:8px;box-shadow:0 4px 16px rgba(0,93,77,.5);transition:transform .1s;}
.btn-del-sw:active,.btn-keep-sw:active{transform:scale(.95);}

/* â”€â”€ ã‚¬ã‚¤ãƒ‰ ãƒªãƒ‡ã‚¶ã‚¤ãƒ³ â”€â”€ */
#guide{padding:0;padding-bottom:80px;}
.guide-hero{padding:28px 18px 20px;background:linear-gradient(160deg,#0d2920 0%,#0a100e 60%);border-bottom:1px solid var(--border);}
.guide-hero h2{font-size:22px;font-weight:800;margin-bottom:4px;}
.guide-hero p{font-size:12px;color:var(--text-sub);line-height:1.5;}

.guide-body{padding:18px;}

/* å¤§ããªãƒ•ã‚£ãƒ¼ãƒãƒ£ãƒ¼ã‚«ãƒ¼ãƒ‰ */
.guide-feature-card{border-radius:20px;overflow:hidden;margin-bottom:20px;position:relative;height:130px;background-size:cover;background-position:center;cursor:pointer;display:flex;align-items:flex-end;padding:16px;}
.guide-feature-card::before{content:'';position:absolute;inset:0;background:linear-gradient(to top,rgba(0,0,0,.85),rgba(0,0,0,.1));z-index:1;}
.guide-feature-card::after{content:'';position:absolute;inset:0;background:rgba(0,93,77,.25);z-index:1;}
.guide-feature-inner{position:relative;z-index:2;}
.guide-feature-tag{font-size:10px;font-weight:700;color:var(--accent);letter-spacing:1px;text-transform:uppercase;margin-bottom:4px;}
.guide-feature-title{font-size:18px;font-weight:800;color:#fff;}

/* ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚¿ã‚¤ãƒˆãƒ« */
.guide-sec-ttl{font-size:11px;font-weight:700;color:var(--text-sub);text-transform:uppercase;letter-spacing:1.2px;margin-bottom:10px;margin-top:22px;}
.guide-sec-ttl:first-child{margin-top:0;}

/* ã‚³ãƒ³ãƒ‘ã‚¯ãƒˆã‚«ãƒ¼ãƒ‰ãƒªã‚¹ãƒˆ */
.guide-list{background:var(--card);border-radius:16px;overflow:hidden;border:1px solid var(--border);}
.guide-list-item{display:flex;align-items:center;gap:12px;padding:14px 15px;border-bottom:1px solid var(--border);cursor:pointer;transition:background .15s;}
.guide-list-item:last-child{border-bottom:none;}
.guide-list-item:active{background:rgba(0,200,154,.05);}
.gli-icon{width:38px;height:38px;border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:17px;flex-shrink:0;}
.gli-text{flex:1;}
.gli-text h4{font-size:13px;font-weight:600;margin-bottom:2px;}
.gli-text p{font-size:11px;color:var(--text-sub);line-height:1.4;}
.gli-arr{color:rgba(255,255,255,.2);font-size:16px;flex-shrink:0;}

/* ã‚¹ãƒ¯ã‚¤ãƒ—æ“ä½œã‚«ãƒ¼ãƒ‰ï¼ˆæ¨ª2åˆ—ï¼‰ */
.guide-swipe-grid{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-bottom:4px;}
.guide-swipe-card{border-radius:16px;padding:16px 14px;display:flex;flex-direction:column;gap:8px;}
.guide-swipe-card.del{background:linear-gradient(135deg,rgba(192,57,43,.25),rgba(192,57,43,.1));border:1px solid rgba(224,82,82,.2);}
.guide-swipe-card.keep{background:linear-gradient(135deg,rgba(0,122,101,.25),rgba(0,122,101,.1));border:1px solid rgba(0,200,154,.2);}
.gsc-icon{font-size:28px;}
.gsc-title{font-size:14px;font-weight:700;}
.gsc-desc{font-size:11px;color:var(--text-sub);line-height:1.4;}

/* ãƒ’ãƒ³ãƒˆãƒãƒŠãƒ¼ */
.guide-tip{background:linear-gradient(135deg,rgba(0,93,77,.3),rgba(0,93,77,.1));border:1px solid rgba(0,200,154,.15);border-radius:16px;padding:16px;display:flex;gap:12px;align-items:flex-start;margin-top:10px;}
.guide-tip-icon{font-size:22px;flex-shrink:0;margin-top:1px;}
.guide-tip-text h4{font-size:13px;font-weight:700;margin-bottom:3px;color:var(--accent);}
.guide-tip-text p{font-size:11px;color:var(--text-sub);line-height:1.45;}

/* â”€â”€ å®Œäº†ç”»é¢ â”€â”€ */
.comp-trophy{font-size:80px;animation:trophy-pop .6s cubic-bezier(.17,.67,.3,1.4) forwards;margin-bottom:16px;display:block;}
@keyframes trophy-pop{0%{transform:scale(0) rotate(-10deg);opacity:0;}60%{transform:scale(1.2) rotate(4deg);}100%{transform:scale(1) rotate(0);opacity:1;}}
.comp-title{font-size:26px;font-weight:800;margin-bottom:8px;}
.comp-sub{font-size:14px;color:var(--text-sub);margin-bottom:20px;line-height:1.6;}
.comp-stats{background:var(--card);border-radius:16px;padding:16px 20px;margin-bottom:28px;font-size:13px;color:var(--text-sub);width:100%;border:1px solid var(--border);}
.comp-stats strong{color:var(--accent);font-size:20px;font-weight:800;}
.comp-btn{background:linear-gradient(135deg,var(--mid),var(--primary));color:#fff;border:none;border-radius:18px;padding:16px 40px;font-size:15px;font-weight:700;cursor:pointer;box-shadow:0 4px 20px rgba(0,122,101,.4);}

/* â”€â”€ ã‚¬ã‚¤ãƒ‰è©³ç´° â”€â”€ */
.gd-hero{border-radius:18px;height:160px;background-size:cover;background-position:center;position:relative;overflow:hidden;margin-bottom:22px;display:flex;align-items:flex-end;padding:16px;}
.gd-hero::before{content:'';position:absolute;inset:0;background:linear-gradient(to top,rgba(0,0,0,.85),transparent 60%);z-index:1;}
.gd-hero-inner{position:relative;z-index:2;}
.gd-hero-tag{font-size:10px;color:var(--accent);font-weight:700;letter-spacing:1px;text-transform:uppercase;margin-bottom:4px;}
.gd-hero-title{font-size:20px;font-weight:800;color:#fff;}
.gd-step-list{display:flex;flex-direction:column;gap:12px;margin-bottom:24px;}
.gd-step{background:var(--card);border-radius:14px;padding:16px;border:1px solid var(--border);display:flex;gap:12px;align-items:flex-start;}
.gd-step-num{width:28px;height:28px;border-radius:50%;background:var(--primary);color:var(--accent);font-size:13px;font-weight:800;display:flex;align-items:center;justify-content:center;flex-shrink:0;}
.gd-step-body h4{font-size:13px;font-weight:700;margin-bottom:3px;}
.gd-step-body p{font-size:12px;color:var(--text-sub);line-height:1.5;}
.gd-cta{background:linear-gradient(135deg,var(--mid),var(--primary));color:#fff;border:none;border-radius:16px;padding:16px;width:100%;font-size:15px;font-weight:700;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:8px;}

/* â”€â”€ ãƒœãƒˆãƒ ãƒŠãƒ“ â”€â”€ */
nav{position:fixed;bottom:0;left:50%;transform:translateX(-50%);width:100%;max-width:480px;height:76px;background:rgba(10,20,17,.97);backdrop-filter:blur(20px);-webkit-backdrop-filter:blur(20px);display:flex;justify-content:space-around;align-items:center;padding-bottom:10px;border-top:1px solid var(--border);z-index:40;}
.nav-item{display:flex;flex-direction:column;align-items:center;color:var(--text-sub);font-size:10px;font-weight:600;cursor:pointer;width:80px;transition:color .2s;}
.nav-item.active{color:var(--accent);}
.nav-icon{font-size:22px;margin-bottom:3px;}
.nav-item.active .nav-icon{filter:drop-shadow(0 0 6px rgba(0,232,181,.5));}
/* navã®é«˜ã•åˆ†ãƒ“ãƒ¥ãƒ¼ã«ä½™ç™½ã‚’ç¢ºä¿ */
.view{padding-bottom:96px !important;}
</style>
</head>
<body>
<div id="app">

  <header id="main-header">
    <div class="hdr-top">
      <div id="back-btn" class="back-btn" onclick="goBack()">â€¹ æˆ»ã‚‹</div>
      <div id="hdr-actions" class="hdr-actions">
        <button class="sort-btn" id="sort-btn" onclick="openSort()" title="ä¸¦ã³æ›¿ãˆ">
          <svg viewBox="0 0 18 14"><line x1="1" y1="2" x2="17" y2="2"/><line x1="1" y1="7" x2="13" y2="7"/><line x1="1" y1="12" x2="9" y2="12"/></svg>
        </button>
        <button class="pill-btn" id="sel-all-btn" onclick="toggleSelectAll()">âœ“ å…¨ã¦é¸æŠã™ã‚‹</button>
      </div>
    </div>
    <div class="hdr-title-row">
      <h1 id="hdr-title">ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸</h1>
      <div id="hdr-sub" class="hdr-sub"></div>
    </div>
  </header>

  <!-- ãƒ›ãƒ¼ãƒ  -->
  <main id="home" class="view active">
    <div class="sto-row"><span class="used">1,640 GB ã‚’ä½¿ç”¨ä¸­ : å…¨ 2,000 GB</span><span class="pct">82% ä½¿ç”¨æ¸ˆã¿</span></div>
    <div class="prog-track"><div class="prog-fill"></div></div>
    <div class="home-grid">
      <div class="home-card photos"      onclick="switchTab('similar-photos')"><div class="hc-inner"><h3>ä¼¼ã¦ã„ã‚‹å†™çœŸ</h3><p>24.4 GB</p></div></div>
      <div class="home-card raw"         onclick="switchTab('raw-photos')"    ><div class="hc-inner"><h3>RAWãƒ‡ãƒ¼ã‚¿</h3><p>128 GB</p></div></div>
      <div class="home-card videos"      onclick="switchTab('videos')"        ><div class="hc-inner"><h3>å‹•ç”»ã‚’æ•´ç†</h3><p>299 GB</p></div></div>
      <div class="home-card screenshots" onclick="switchTab('screenshots')"   ><div class="hc-inner"><h3>ã‚¹ã‚¯ã‚·ãƒ§</h3><p>1.8 GB</p></div></div>
    </div>
  </main>

  <!-- RAW / å‹•ç”» / ã‚¹ã‚¯ã‚·ãƒ§ / ä¼¼ã¦ã„ã‚‹ -->
  <main id="raw-photos"     class="view"><div id="raw-grid"   class="media-grid"></div></main>
  <main id="videos"         class="view"><div id="vid-grid"   class="media-grid"></div></main>
  <main id="screenshots"    class="view"><div id="ss-grid"    class="media-grid"></div></main>
  <main id="similar-photos" class="view"><div id="sim-cont"   style="padding-bottom:60px;"></div></main>

  <!-- ã‚¹ãƒ¯ã‚¤ãƒ—æœˆä¸€è¦§ -->
  <main id="swipe" class="view" style="padding:16px;padding-bottom:20px;">
    <div class="swipe-list-hdr"><h2>æœˆåˆ¥ã‚¹ãƒ¯ã‚¤ãƒ—</h2><p>æœˆã”ã¨ã«å†™çœŸã‚’ç¢ºèªã—ã¦æ•´ç†ã—ã¾ã—ã‚‡ã†</p></div>
    <div class="month-list" id="month-list"></div>
  </main>

  <!-- ã‚¬ã‚¤ãƒ‰ -->
  <main id="guide" class="view">
    <div class="guide-hero">
      <h2>ä½¿ã„æ–¹ã‚¬ã‚¤ãƒ‰</h2>
      <p>ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚’è³¢ãæ•´ç†ã™ã‚‹ãŸã‚ã®æ©Ÿèƒ½ã‚’ã”æ¡ˆå†…ã—ã¾ã™ã€‚<br>ã‚¿ãƒƒãƒ—ã—ã¦è©³ã—ãç¢ºèªã§ãã¾ã™ã€‚</p>
    </div>
    <div class="guide-body">

      <!-- ãƒ•ã‚£ãƒ¼ãƒãƒ£ãƒ¼å¤§ã‚«ãƒ¼ãƒ‰ -->
      <div class="guide-feature-card" id="guide-feat-card">
        <div class="guide-feature-inner">
          <div class="guide-feature-tag">â­ ãŠã™ã™ã‚</div>
          <div class="guide-feature-title">æœˆåˆ¥ã‚¹ãƒ¯ã‚¤ãƒ—ã§æ•´ç†</div>
        </div>
      </div>

      <!-- åŸºæœ¬æ©Ÿèƒ½ãƒªã‚¹ãƒˆ -->
      <div class="guide-sec-ttl">åŸºæœ¬æ©Ÿèƒ½</div>
      <div class="guide-list">
        <div class="guide-list-item" onclick="openGuideDetail('similar')">
          <div class="gli-icon" style="background:rgba(0,93,77,.3);">ğŸ“·</div>
          <div class="gli-text"><h4>ä¼¼ã¦ã„ã‚‹å†™çœŸã‚’æ•´ç†</h4><p>é¡ä¼¼å†™çœŸã‚’ã‚°ãƒ«ãƒ¼ãƒ—åŒ–ã—ã¦æœ€é«˜ã®1æšã ã‘æ®‹ã›ã¾ã™</p></div>
          <div class="gli-arr">â€º</div>
        </div>
        <div class="guide-list-item" onclick="openGuideDetail('videos')">
          <div class="gli-icon" style="background:rgba(0,93,77,.3);">ğŸ¬</div>
          <div class="gli-text"><h4>å‹•ç”»ã‚’æ•´ç†ã™ã‚‹</h4><p>ã‚µã‚¤ã‚ºã‚„é•·ã•ã§çµã‚Šè¾¼ã¿ã€ä¸è¦ãªå‹•ç”»ã‚’å‰Šé™¤</p></div>
          <div class="gli-arr">â€º</div>
        </div>
        <div class="guide-list-item" onclick="openGuideDetail('raw')">
          <div class="gli-icon" style="background:rgba(0,93,77,.3);">ğŸ“„</div>
          <div class="gli-text"><h4>RAWãƒ‡ãƒ¼ã‚¿ã‚’å‰Šé™¤</h4><p>JPEGã‚’æ®‹ã—ã¦RAWãƒ•ã‚¡ã‚¤ãƒ«ã ã‘ã‚’å‰Šé™¤ã§ãã¾ã™</p></div>
          <div class="gli-arr">â€º</div>
        </div>
        <div class="guide-list-item" onclick="openGuideDetail('screenshots')">
          <div class="gli-icon" style="background:rgba(0,93,77,.3);">ğŸ–¼ï¸</div>
          <div class="gli-text"><h4>ã‚¹ã‚¯ã‚·ãƒ§ã‚’ä¸€æ‹¬å‰Šé™¤</h4><p>ä¸è¦ãªã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã‚’ã¾ã¨ã‚ã¦å‰Šé™¤</p></div>
          <div class="gli-arr">â€º</div>
        </div>
      </div>

      <!-- ã‚¹ãƒ¯ã‚¤ãƒ—æ“ä½œ -->
      <div class="guide-sec-ttl">ã‚¹ãƒ¯ã‚¤ãƒ—æ“ä½œ</div>
      <div class="guide-swipe-grid">
        <div class="guide-swipe-card del">
          <div class="gsc-icon">ğŸ‘</div>
          <div class="gsc-title" style="color:#e05252;">å‰Šé™¤</div>
          <div class="gsc-desc">ä¸è¦ãªå†™çœŸã¯ã€Œå‰Šé™¤ã€ã§å‰Šé™¤ã‚­ãƒ¥ãƒ¼ã«è¿½åŠ </div>
        </div>
        <div class="guide-swipe-card keep">
          <div class="gsc-icon">ğŸ‘</div>
          <div class="gsc-title" style="color:var(--accent);">ä¿æŒ</div>
          <div class="gsc-desc">æ®‹ã—ãŸã„å†™çœŸã¯ã€Œä¿æŒã€ã§ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã«æ®‹ã™</div>
        </div>
      </div>

      <!-- ãƒ’ãƒ³ãƒˆ -->
      <div class="guide-tip">
        <div class="guide-tip-icon">ğŸ’¡</div>
        <div class="guide-tip-text">
          <h4>å®šæœŸçš„ãªæ•´ç†ãŒãŠã™ã™ã‚</h4>
          <p>æœˆã«1åº¦ã‚¹ãƒ¯ã‚¤ãƒ—ã§æ•´ç†ã™ã‚‹ã¨ã€ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚’å¸¸ã«å¿«é©ã«ä¿ã¦ã¾ã™ã€‚å…¨ä»¶å®Œäº†ã™ã‚‹ã¨ğŸ†ãƒãƒ¼ã‚¯ãŒä»˜ãã¾ã™ã€‚</p>
        </div>
      </div>

    </div>
  </main>

  <!-- ã‚½ãƒ¼ãƒˆãƒœãƒˆãƒ ã‚·ãƒ¼ãƒˆ -->
  <div class="sort-overlay" id="sort-overlay" onclick="closeSortOnBg(event)">
    <div class="sort-sheet">
      <div class="sort-handle"></div>
      <div class="sort-title">ä¸¦ã³æ›¿ãˆ</div>
      <div class="sort-option active" data-sort="newest" onclick="applySort('newest')">
        <span>æ–°ã—ã„é †</span><div class="sort-check">âœ“</div>
      </div>
      <div class="sort-option" data-sort="oldest" onclick="applySort('oldest')">
        <span>å¤ã„é †</span><div class="sort-check">âœ“</div>
      </div>
      <div class="sort-option" data-sort="size-desc" onclick="applySort('size-desc')">
        <span>ã‚µã‚¤ã‚ºãŒå¤§ãã„é †</span><div class="sort-check">âœ“</div>
      </div>
      <div class="sort-option" data-sort="size-asc" onclick="applySort('size-asc')">
        <span>ã‚µã‚¤ã‚ºãŒå°ã•ã„é †</span><div class="sort-check">âœ“</div>
      </div>
    </div>
  </div>

  <!-- å‰Šé™¤ãƒãƒ¼ï¼ˆã‚¹ãƒ¯ã‚¤ãƒ—è©³ç´°ã§ã¯éè¡¨ç¤ºï¼‰ -->
  <div id="del-bar" class="del-bar">
    <button class="btn-del" onclick="deleteSelected()"><span>ğŸ—‘</span><span id="del-txt">å‰Šé™¤</span></button>
  </div>

  <!-- ã‚¹ãƒ¯ã‚¤ãƒ—è©³ç´°ï¼ˆposition:absolute ã§å®Œå…¨ç‹¬ç«‹ï¼‰ -->
  <div id="swipe-detail">
    <div class="sd-header">
      <div class="sd-top">
        <div class="sd-back" onclick="closeSwipeDetail()">â€¹ æœˆ</div>
        <div class="sd-title" id="sd-month-title">2æœˆ 2026</div>
        <button class="sd-share">å…±æœ‰</button>
      </div>
      <div class="sd-prog-row">
        <div class="sd-prog-track"><div class="sd-prog-fill" id="sd-prog-fill" style="width:0%"></div></div>
        <div class="sd-prog-txt" id="sd-prog-txt">0/0 ä»¶ã‚’ç¢ºèªæ¸ˆã¿</div>
      </div>
    </div>
    <div class="sd-photo-area">
      <div class="sd-photo-card">
        <img id="sd-main-img" src="" alt="">
        <div class="sd-photo-meta" id="sd-photo-meta">1 / 10</div>
      </div>
    </div>
    <div class="sd-strip" id="sd-strip"></div>
    <!-- å‰Šé™¤/ä¿æŒãƒœã‚¿ãƒ³ï¼ˆdel-barã¨ã¯å®Œå…¨åˆ¥è¦ç´ ï¼‰ -->
    <div class="sd-actions">
      <button class="btn-del-sw" onclick="swipeAction('delete')">ğŸ‘ å‰Šé™¤</button>
      <button class="btn-keep-sw" onclick="swipeAction('keep')">ğŸ‘ ä¿æŒ</button>
    </div>
  </div>

    <!-- å®Œäº†ç”»é¢ -->
    <div id="sd-completion" style="display:none;flex:1;flex-direction:column;align-items:center;justify-content:center;padding:32px 24px;text-align:center;">
      <div class="comp-trophy">ğŸ†</div>
      <h2 class="comp-title">å®Œäº†ï¼ãŠã‚ã§ã¨ã†ğŸ‰</h2>
      <p class="comp-sub" id="comp-sub-text"></p>
      <div class="comp-stats" id="comp-stats"></div>
      <button class="comp-btn" onclick="closeSwipeDetail()">æœˆä¸€è¦§ã«æˆ»ã‚‹</button>
    </div>
  </div>

  <!-- ã‚¬ã‚¤ãƒ‰è©³ç´°ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ -->
  <div id="guide-detail-overlay" style="display:none;position:absolute;inset:0;background:var(--bg);z-index:55;flex-direction:column;">
    <div style="padding:44px 18px 14px;border-bottom:1px solid var(--border);display:flex;align-items:center;gap:12px;flex-shrink:0;">
      <div style="font-size:17px;color:var(--accent);font-weight:700;cursor:pointer;padding-right:8px;" onclick="closeGuideDetail()">â€¹ ã‚¬ã‚¤ãƒ‰</div>
      <div id="gd-title" style="font-size:16px;font-weight:700;flex:1;"></div>
    </div>
    <div id="gd-body" style="flex:1;overflow-y:auto;padding:20px 18px 40px;"></div>
  </div>

  <nav id="main-nav">
    <div class="nav-item active" data-target="home"><div class="nav-icon">ğŸ </div><span>ãƒ›ãƒ¼ãƒ </span></div>
    <div class="nav-item"        data-target="swipe"><div class="nav-icon">ğŸ‘†</div><span>ã‚¹ãƒ¯ã‚¤ãƒ—</span></div>
    <div class="nav-item"        data-target="guide"><div class="nav-icon">ğŸ“–</div><span>ã‚¬ã‚¤ãƒ‰</span></div>
  </nav>
</div>

<script>
// ã‚¯ãƒ¬ãƒ¨ãƒ³é¢¨SVGã‚¢ãƒ‹ãƒãƒ«ã‚¤ãƒ©ã‚¹ãƒˆï¼ˆdata URLï¼‰
function makeSVG(svgContent, bg){
  const svg=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 200" width="200" height="200">
    <rect width="200" height="200" fill="${bg}" rx="12"/>
    <filter id="rough"><feTurbulence type="fractalNoise" baseFrequency="0.04" numOctaves="4" result="noise"/><feDisplacementMap in="SourceGraphic" in2="noise" scale="2.5" xChannelSelector="R" yChannelSelector="G"/></filter>
    <g filter="url(#rough)">${svgContent}</g>
  </svg>`;
  return 'data:image/svg+xml;charset=utf-8,' + encodeURIComponent(svg);
}

// å­çŒ« ğŸ±
const cat1 = makeSVG(`
  <ellipse cx="100" cy="125" rx="52" ry="48" fill="#f4c97a" stroke="#b07a2a" stroke-width="3.5" stroke-linecap="round"/>
  <ellipse cx="100" cy="90" rx="42" ry="40" fill="#f4c97a" stroke="#b07a2a" stroke-width="3.5"/>
  <polygon points="65,60 55,30 80,55" fill="#f4c97a" stroke="#b07a2a" stroke-width="3" stroke-linejoin="round"/>
  <polygon points="135,60 145,30 120,55" fill="#f4c97a" stroke="#b07a2a" stroke-width="3" stroke-linejoin="round"/>
  <ellipse cx="88" cy="88" rx="9" ry="11" fill="#fff" stroke="#b07a2a" stroke-width="2"/>
  <ellipse cx="112" cy="88" rx="9" ry="11" fill="#fff" stroke="#b07a2a" stroke-width="2"/>
  <ellipse cx="88" cy="90" rx="5" ry="7" fill="#3a2a1a"/>
  <ellipse cx="112" cy="90" rx="5" ry="7" fill="#3a2a1a"/>
  <circle cx="90" cy="88" r="2" fill="#fff"/>
  <circle cx="114" cy="88" r="2" fill="#fff"/>
  <ellipse cx="100" cy="103" rx="7" ry="5" fill="#f0a0b0" stroke="#c06070" stroke-width="2"/>
  <path d="M93 108 Q100 115 107 108" stroke="#b07a2a" stroke-width="2.5" fill="none" stroke-linecap="round"/>
  <line x1="70" y1="100" x2="50" y2="96" stroke="#b07a2a" stroke-width="2" stroke-linecap="round"/>
  <line x1="70" y1="104" x2="48" y2="104" stroke="#b07a2a" stroke-width="2" stroke-linecap="round"/>
  <line x1="130" y1="100" x2="150" y2="96" stroke="#b07a2a" stroke-width="2" stroke-linecap="round"/>
  <line x1="130" y1="104" x2="152" y2="104" stroke="#b07a2a" stroke-width="2" stroke-linecap="round"/>
  <path d="M55 155 Q100 180 145 155" stroke="#b07a2a" stroke-width="3" fill="none" stroke-linecap="round"/>
`, '#fff9e6');

// å­çŒ«2ï¼ˆã‚°ãƒ¬ãƒ¼ï¼‰
const cat2 = makeSVG(`
  <ellipse cx="100" cy="125" rx="52" ry="48" fill="#c8cdd4" stroke="#666" stroke-width="3.5"/>
  <ellipse cx="100" cy="88" rx="42" ry="40" fill="#c8cdd4" stroke="#666" stroke-width="3.5"/>
  <polygon points="65,58 54,28 80,55" fill="#c8cdd4" stroke="#666" stroke-width="3" stroke-linejoin="round"/>
  <polygon points="135,58 146,28 120,55" fill="#c8cdd4" stroke="#666" stroke-width="3" stroke-linejoin="round"/>
  <ellipse cx="88" cy="87" rx="9" ry="11" fill="#fff" stroke="#666" stroke-width="2"/>
  <ellipse cx="112" cy="87" rx="9" ry="11" fill="#fff" stroke="#666" stroke-width="2"/>
  <ellipse cx="88" cy="89" rx="5" ry="7" fill="#2a2a3a"/>
  <ellipse cx="112" cy="89" rx="5" ry="7" fill="#2a2a3a"/>
  <circle cx="90" cy="87" r="2" fill="#fff"/>
  <ellipse cx="100" cy="102" rx="7" ry="5" fill="#f0a0b0" stroke="#c06070" stroke-width="2"/>
  <path d="M93 107 Q100 114 107 107" stroke="#666" stroke-width="2.5" fill="none" stroke-linecap="round"/>
  <line x1="70" y1="99" x2="50" y2="95" stroke="#666" stroke-width="2" stroke-linecap="round"/>
  <line x1="70" y1="103" x2="48" y2="103" stroke="#666" stroke-width="2" stroke-linecap="round"/>
  <line x1="130" y1="99" x2="150" y2="95" stroke="#666" stroke-width="2" stroke-linecap="round"/>
  <line x1="130" y1="103" x2="152" y2="103" stroke="#666" stroke-width="2" stroke-linecap="round"/>
  <path d="M50 155 Q100 178 150 155" stroke="#666" stroke-width="3" fill="none" stroke-linecap="round"/>
`, '#eef0f8');

// å­çŠ¬ ğŸ¶ï¼ˆã‚´ãƒ¼ãƒ«ãƒ‡ãƒ³ï¼‰
const dog1 = makeSVG(`
  <ellipse cx="100" cy="128" rx="55" ry="46" fill="#e8b45a" stroke="#9a6820" stroke-width="3.5"/>
  <ellipse cx="100" cy="88" rx="44" ry="40" fill="#e8b45a" stroke="#9a6820" stroke-width="3.5"/>
  <ellipse cx="67" cy="78" rx="18" ry="26" fill="#d4963c" stroke="#9a6820" stroke-width="3" transform="rotate(-10,67,78)"/>
  <ellipse cx="133" cy="78" rx="18" ry="26" fill="#d4963c" stroke="#9a6820" stroke-width="3" transform="rotate(10,133,78)"/>
  <ellipse cx="88" cy="87" rx="9" ry="10" fill="#fff" stroke="#9a6820" stroke-width="2"/>
  <ellipse cx="112" cy="87" rx="9" ry="10" fill="#fff" stroke="#9a6820" stroke-width="2"/>
  <ellipse cx="88" cy="89" rx="5" ry="6" fill="#2a1a0a"/>
  <ellipse cx="112" cy="89" rx="5" ry="6" fill="#2a1a0a"/>
  <circle cx="90" cy="87" r="2" fill="#fff"/>
  <circle cx="114" cy="87" r="2" fill="#fff"/>
  <ellipse cx="100" cy="106" rx="14" ry="10" fill="#d4763c" stroke="#9a4820" stroke-width="2.5"/>
  <path d="M88 112 Q100 122 112 112" stroke="#9a4820" stroke-width="2.5" fill="none" stroke-linecap="round"/>
  <ellipse cx="100" cy="105" rx="6" ry="4" fill="#c05040"/>
`, '#fff5e0');

// å­çŠ¬2ï¼ˆç™½é»’ï¼‰
const dog2 = makeSVG(`
  <ellipse cx="100" cy="128" rx="55" ry="46" fill="#f0f0f0" stroke="#444" stroke-width="3.5"/>
  <ellipse cx="100" cy="88" rx="44" ry="40" fill="#f0f0f0" stroke="#444" stroke-width="3.5"/>
  <ellipse cx="67" cy="78" rx="18" ry="26" fill="#ddd" stroke="#444" stroke-width="3" transform="rotate(-10,67,78)"/>
  <ellipse cx="133" cy="78" rx="18" ry="26" fill="#ddd" stroke="#444" stroke-width="3" transform="rotate(10,133,78)"/>
  <ellipse cx="82" cy="80" rx="20" ry="16" fill="#333" opacity="0.85"/>
  <ellipse cx="88" cy="87" rx="9" ry="10" fill="#fff" stroke="#444" stroke-width="2"/>
  <ellipse cx="112" cy="87" rx="9" ry="10" fill="#fff" stroke="#444" stroke-width="2"/>
  <ellipse cx="88" cy="89" rx="5" ry="6" fill="#111"/>
  <ellipse cx="112" cy="89" rx="5" ry="6" fill="#111"/>
  <circle cx="90" cy="87" r="2" fill="#fff"/>
  <ellipse cx="100" cy="106" rx="14" ry="10" fill="#e07060" stroke="#a04030" stroke-width="2.5"/>
  <path d="M88 112 Q100 122 112 112" stroke="#444" stroke-width="2.5" fill="none" stroke-linecap="round"/>
`, '#f0f4ff');

// å­ã‚¦ã‚µã‚® ğŸ°
const bunny1 = makeSVG(`
  <ellipse cx="100" cy="130" rx="50" ry="44" fill="#f5f0ea" stroke="#9a8a7a" stroke-width="3.5"/>
  <ellipse cx="100" cy="88" rx="38" ry="36" fill="#f5f0ea" stroke="#9a8a7a" stroke-width="3.5"/>
  <ellipse cx="76" cy="52" rx="12" ry="32" fill="#f5f0ea" stroke="#9a8a7a" stroke-width="3" transform="rotate(-8,76,52)"/>
  <ellipse cx="124" cy="52" rx="12" ry="32" fill="#f5f0ea" stroke="#9a8a7a" stroke-width="3" transform="rotate(8,124,52)"/>
  <ellipse cx="77" cy="52" rx="6" ry="24" fill="#f4b8c0" opacity="0.7"/>
  <ellipse cx="123" cy="52" rx="6" ry="24" fill="#f4b8c0" opacity="0.7"/>
  <ellipse cx="88" cy="86" rx="9" ry="10" fill="#fff" stroke="#9a8a7a" stroke-width="2"/>
  <ellipse cx="112" cy="86" rx="9" ry="10" fill="#fff" stroke="#9a8a7a" stroke-width="2"/>
  <ellipse cx="88" cy="88" rx="5" ry="6" fill="#4a3a5a"/>
  <ellipse cx="112" cy="88" rx="5" ry="6" fill="#4a3a5a"/>
  <circle cx="90" cy="86" r="2" fill="#fff"/>
  <circle cx="114" cy="86" r="2" fill="#fff"/>
  <ellipse cx="100" cy="101" rx="8" ry="6" fill="#f4b8c0" stroke="#d090a0" stroke-width="2"/>
  <path d="M94 107 Q100 113 106 107" stroke="#9a8a7a" stroke-width="2.5" fill="none" stroke-linecap="round"/>
  <line x1="72" y1="100" x2="52" y2="96" stroke="#9a8a7a" stroke-width="1.8" stroke-linecap="round"/>
  <line x1="72" y1="104" x2="50" y2="104" stroke="#9a8a7a" stroke-width="1.8" stroke-linecap="round"/>
  <line x1="128" y1="100" x2="148" y2="96" stroke="#9a8a7a" stroke-width="1.8" stroke-linecap="round"/>
  <path d="M52 152 Q100 176 148 152" stroke="#9a8a7a" stroke-width="3" fill="none" stroke-linecap="round"/>
`, '#fdf5ff');

// å­ã‚¦ã‚µã‚®2ï¼ˆèŒ¶è‰²ï¼‰
const bunny2 = makeSVG(`
  <ellipse cx="100" cy="130" rx="50" ry="44" fill="#c8956a" stroke="#7a4820" stroke-width="3.5"/>
  <ellipse cx="100" cy="88" rx="38" ry="36" fill="#c8956a" stroke="#7a4820" stroke-width="3.5"/>
  <ellipse cx="76" cy="52" rx="12" ry="32" fill="#c8956a" stroke="#7a4820" stroke-width="3" transform="rotate(-8,76,52)"/>
  <ellipse cx="124" cy="52" rx="12" ry="32" fill="#c8956a" stroke="#7a4820" stroke-width="3" transform="rotate(8,124,52)"/>
  <ellipse cx="77" cy="52" rx="6" ry="24" fill="#f4c0c8" opacity="0.7"/>
  <ellipse cx="123" cy="52" rx="6" ry="24" fill="#f4c0c8" opacity="0.7"/>
  <ellipse cx="88" cy="86" rx="9" ry="10" fill="#fff" stroke="#7a4820" stroke-width="2"/>
  <ellipse cx="112" cy="86" rx="9" ry="10" fill="#fff" stroke="#7a4820" stroke-width="2"/>
  <ellipse cx="88" cy="88" rx="5" ry="6" fill="#3a1a0a"/>
  <ellipse cx="112" cy="88" rx="5" ry="6" fill="#3a1a0a"/>
  <circle cx="90" cy="86" r="2" fill="#fff"/>
  <ellipse cx="100" cy="101" rx="8" ry="6" fill="#f4b8c0" stroke="#d090a0" stroke-width="2"/>
  <path d="M94 107 Q100 113 106 107" stroke="#7a4820" stroke-width="2.5" fill="none" stroke-linecap="round"/>
`, '#fff0e8');

// å°é³¥ ğŸ¤ï¼ˆã²ã‚ˆã“ï¼‰
const bird1 = makeSVG(`
  <ellipse cx="100" cy="125" rx="50" ry="44" fill="#fde96a" stroke="#c8a020" stroke-width="3.5"/>
  <ellipse cx="100" cy="82" rx="36" ry="34" fill="#fde96a" stroke="#c8a020" stroke-width="3.5"/>
  <ellipse cx="88" cy="78" rx="9" ry="10" fill="#fff" stroke="#c8a020" stroke-width="2"/>
  <ellipse cx="112" cy="78" rx="9" ry="10" fill="#fff" stroke="#c8a020" stroke-width="2"/>
  <ellipse cx="88" cy="80" rx="5" ry="6" fill="#1a1a2a"/>
  <ellipse cx="112" cy="80" rx="5" ry="6" fill="#1a1a2a"/>
  <circle cx="90" cy="78" r="2" fill="#fff"/>
  <circle cx="114" cy="78" r="2" fill="#fff"/>
  <polygon points="100,96 90,103 110,103" fill="#ff9020" stroke="#c06010" stroke-width="2" stroke-linejoin="round"/>
  <path d="M55 105 Q35 85 50 70 Q58 90 70 105" fill="#fde96a" stroke="#c8a020" stroke-width="2.5"/>
  <path d="M145 105 Q165 85 150 70 Q142 90 130 105" fill="#fde96a" stroke="#c8a020" stroke-width="2.5"/>
  <ellipse cx="78" cy="148" rx="12" ry="8" fill="#ff9020" stroke="#c06010" stroke-width="2.5"/>
  <ellipse cx="122" cy="148" rx="12" ry="8" fill="#ff9020" stroke="#c06010" stroke-width="2.5"/>
`, '#fffbe0');

// å°é³¥2ï¼ˆé’ã„é³¥ï¼‰
const bird2 = makeSVG(`
  <ellipse cx="100" cy="122" rx="48" ry="42" fill="#6ac0f0" stroke="#1a70c0" stroke-width="3.5"/>
  <ellipse cx="100" cy="80" rx="36" ry="34" fill="#6ac0f0" stroke="#1a70c0" stroke-width="3.5"/>
  <ellipse cx="115" cy="70" rx="18" ry="8" fill="#fff" stroke="#1a70c0" stroke-width="2.5" transform="rotate(-20,115,70)"/>
  <ellipse cx="88" cy="77" rx="9" ry="10" fill="#fff" stroke="#1a70c0" stroke-width="2"/>
  <ellipse cx="112" cy="77" rx="9" ry="10" fill="#fff" stroke="#1a70c0" stroke-width="2"/>
  <ellipse cx="88" cy="79" rx="5" ry="6" fill="#0a0a2a"/>
  <ellipse cx="112" cy="79" rx="5" ry="6" fill="#0a0a2a"/>
  <circle cx="90" cy="77" r="2" fill="#fff"/>
  <polygon points="100,94 89,101 111,101" fill="#ff9020" stroke="#c06010" stroke-width="2" stroke-linejoin="round"/>
  <path d="M54 108 Q32 88 46 68 Q56 88 68 108" fill="#5aaae0" stroke="#1a70c0" stroke-width="2.5"/>
  <path d="M146 108 Q168 88 154 68 Q144 88 132 108" fill="#5aaae0" stroke="#1a70c0" stroke-width="2.5"/>
  <ellipse cx="80" cy="146" rx="12" ry="7" fill="#ff9020" stroke="#c06010" stroke-width="2.5"/>
  <ellipse cx="120" cy="146" rx="12" ry="7" fill="#ff9020" stroke="#c06010" stroke-width="2.5"/>
`, '#e8f8ff');

// å°é³¥3ï¼ˆç·‘ã‚¤ãƒ³ã‚³ï¼‰
const bird3 = makeSVG(`
  <ellipse cx="100" cy="122" rx="48" ry="42" fill="#7ad460" stroke="#3a8a20" stroke-width="3.5"/>
  <ellipse cx="100" cy="80" rx="36" ry="34" fill="#7ad460" stroke="#3a8a20" stroke-width="3.5"/>
  <ellipse cx="100" cy="60" rx="10" ry="14" fill="#5ab840" stroke="#3a8a20" stroke-width="2.5"/>
  <ellipse cx="100" cy="56" rx="5" ry="7" fill="#ffe060"/>
  <ellipse cx="87" cy="77" rx="9" ry="10" fill="#fff" stroke="#3a8a20" stroke-width="2"/>
  <ellipse cx="113" cy="77" rx="9" ry="10" fill="#fff" stroke="#3a8a20" stroke-width="2"/>
  <ellipse cx="87" cy="79" rx="5" ry="6" fill="#0a1a0a"/>
  <ellipse cx="113" cy="79" rx="5" ry="6" fill="#0a1a0a"/>
  <circle cx="89" cy="77" r="2" fill="#fff"/>
  <polygon points="100,93 88,101 112,101" fill="#ff9020" stroke="#c06010" stroke-width="2.5" stroke-linejoin="round"/>
  <ellipse cx="80" cy="90" rx="14" ry="10" fill="#ffe060" opacity="0.8"/>
  <ellipse cx="120" cy="90" rx="14" ry="10" fill="#ffe060" opacity="0.8"/>
  <path d="M52 110 Q30 90 44 68 Q54 90 68 110" fill="#5ab840" stroke="#3a8a20" stroke-width="2.5"/>
  <path d="M148 110 Q170 90 156 68 Q146 90 132 110" fill="#5ab840" stroke="#3a8a20" stroke-width="2.5"/>
  <ellipse cx="80" cy="148" rx="11" ry="7" fill="#ff9020" stroke="#c06010" stroke-width="2.5"/>
  <ellipse cx="120" cy="148" rx="11" ry="7" fill="#ff9020" stroke="#c06010" stroke-width="2.5"/>
`, '#f0fff0');

const imgPool=[cat1,cat2,dog1,dog2,bunny1,bunny2,bird1,bird2,bird3,cat1,cat2,dog1];
function genData(n,type){
  return Array.from({length:n},(_,i)=>{
    const src=imgPool[i%imgPool.length];
    if(type==='raw')   return{src,size:(Math.random()*50+20).toFixed(1)};
    if(type==='video') return{src,size:(Math.random()*5+.5).toFixed(2),dur:`0${Math.floor(Math.random()*9)}:${String(Math.floor(Math.random()*50)+10).padStart(2,'0')}`};
    return{src,size:(Math.random()*4+1).toFixed(1)};
  });
}
function genSimilar(n){
  return Array.from({length:n},(_,i)=>{
    const base=imgPool[i%imgPool.length];
    const sub=Array.from({length:Math.floor(Math.random()*3)+2},(__,j)=>({src:imgPool[(i+j+1)%imgPool.length],size:(Math.random()*3+1).toFixed(1)}));
    return{id:`g${i}`,best:{src:base,size:(Math.random()*4+2).toFixed(1)},sub};
  });
}
function genMonths(){
  const now=new Date();
  return Array.from({length:20},(_,i)=>{
    const d=new Date(now.getFullYear(),now.getMonth()-i,1);
    const total=Math.floor(Math.random()*120)+30;
    const reviewed=i<3?Math.floor(Math.random()*total):(Math.random()>.4?total:Math.floor(Math.random()*total));
    const photos=Array.from({length:Math.min(total,30)},(__,j)=>({src:imgPool[(i+j)%imgPool.length]}));
    return{label:`${d.getFullYear()}å¹´${d.getMonth()+1}æœˆ`,navLabel:`${d.getMonth()+1}æœˆ ${d.getFullYear()}`,total,reviewed,done:reviewed===total,photos,thumb:imgPool[i%imgPool.length]};
  });
}

const rawData=genData(20,'raw'),vidData=genData(16,'video'),ssData=genData(30,'photo');
const simGroups=genSimilar(15),monthData=genMonths();
let currentTab='home',isAllSel=false,sdMonth=null,sdIdx=0,sdMonthIdx=0;
let currentSort='newest'; // ç¾åœ¨ã®ä¸¦ã³é †

// å„ã‚¿ãƒ–ã®ãƒ‡ãƒ¼ã‚¿ã‚’ä¸¦ã³æ›¿ãˆã¦è¿”ã™
function getSorted(data,type){
  const arr=[...data].map((d,i)=>({...d,origIdx:i}));
  if(currentSort==='oldest')    return arr.reverse();
  if(currentSort==='size-desc') return arr.sort((a,b)=>parseFloat(b.size)-parseFloat(a.size));
  if(currentSort==='size-asc')  return arr.sort((a,b)=>parseFloat(a.size)-parseFloat(b.size));
  return arr; // newest = å…ƒé †
}

/* â”€â”€ ã‚½ãƒ¼ãƒˆUI â”€â”€ */
function openSort(){
  document.getElementById('sort-overlay').classList.add('open');
}
function closeSort(){
  document.getElementById('sort-overlay').classList.remove('open');
}
function closeSortOnBg(e){
  if(e.target===document.getElementById('sort-overlay')) closeSort();
}
function applySort(key){
  currentSort=key;
  // ãƒã‚§ãƒƒã‚¯ãƒãƒ¼ã‚¯æ›´æ–°
  document.querySelectorAll('.sort-option').forEach(el=>{
    el.classList.toggle('active', el.dataset.sort===key);
  });
  // ç¾åœ¨ã®ã‚¿ãƒ–ã‚’å†æç”»
  rerenderCurrentGrid();
  setTimeout(closeSort, 180);
}
function rerenderCurrentGrid(){
  if(currentTab==='raw-photos'){
    const sorted=getSorted(rawData,'raw');
    document.getElementById('raw-grid').innerHTML=sorted.map(d=>`<div class="media-item sel-item" data-size="${d.size}" onclick="toggleSel(this)"><img src="${d.src}" loading="lazy"><div class="bdg-top">RAW</div><div class="bdg-bot">${d.size} MB</div><div class="chk">âœ“</div></div>`).join('');
  } else if(currentTab==='videos'){
    const sorted=getSorted(vidData,'video');
    document.getElementById('vid-grid').innerHTML=sorted.map(d=>`<div class="media-item sel-item" data-size="${d.size*1000}" onclick="toggleSel(this)"><img src="${d.src}" loading="lazy"><div class="vid-bdg"><span class="vs">${d.size} GB</span><span class="vd">${d.dur}</span></div><div class="chk">âœ“</div></div>`).join('');
  } else if(currentTab==='screenshots'){
    const sorted=getSorted(ssData,'photo');
    document.getElementById('ss-grid').innerHTML=sorted.map(d=>`<div class="media-item sel-item" data-size="${d.size}" onclick="toggleSel(this)"><img src="${d.src}" loading="lazy"><div class="chk">âœ“</div></div>`).join('');
  }
}

document.addEventListener('DOMContentLoaded',()=>{
  // ãƒ›ãƒ¼ãƒ ã‚«ãƒ¼ãƒ‰ã«SVGã‚¤ãƒ©ã‚¹ãƒˆã‚’è¨­å®š
  document.querySelector('.home-card.photos').style.backgroundImage=`url("${bunny1}")`;
  document.querySelector('.home-card.raw').style.backgroundImage=`url("${cat1}")`;
  document.querySelector('.home-card.videos').style.backgroundImage=`url("${bird1}")`;
  document.querySelector('.home-card.screenshots').style.backgroundImage=`url("${dog1}")`;
  document.getElementById('guide-feat-card').style.backgroundImage=`url("${bird3}")`;
  renderGrids(); renderSimilar(); renderMonths();
  document.querySelectorAll('.nav-item[data-target]').forEach(el=>el.addEventListener('click',()=>switchTab(el.dataset.target)));
  switchTab('home');
});

function renderGrids(){
  document.getElementById('raw-grid').innerHTML=rawData.map(d=>`<div class="media-item sel-item" data-size="${d.size}" onclick="toggleSel(this)"><img src="${d.src}" loading="lazy"><div class="bdg-top">RAW</div><div class="bdg-bot">${d.size} MB</div><div class="chk">âœ“</div></div>`).join('');
  document.getElementById('vid-grid').innerHTML=vidData.map(d=>`<div class="media-item sel-item" data-size="${d.size*1000}" onclick="toggleSel(this)"><img src="${d.src}" loading="lazy"><div class="vid-bdg"><span class="vs">${d.size} GB</span><span class="vd">${d.dur}</span></div><div class="chk">âœ“</div></div>`).join('');
  document.getElementById('ss-grid').innerHTML=ssData.map(d=>`<div class="media-item sel-item" data-size="${d.size}" onclick="toggleSel(this)"><img src="${d.src}" loading="lazy"><div class="chk">âœ“</div></div>`).join('');
}
function renderSimilar(){
  document.getElementById('sim-cont').innerHTML=simGroups.map(g=>`<div class="sim-group" id="${g.id}"><div class="sim-group-header"><span class="sim-group-title">${g.sub.length} ä¼¼ã¦ã„ã¾ã™</span><span class="grp-sel-btn" onclick="toggleGrpSel('${g.id}')">ã™ã¹ã¦ã®é¸æŠã‚’è§£é™¤</span></div><div class="sim-scroll"><div class="sim-best"><div class="best-lbl"><span class="star">â˜…</span> æœ€é«˜</div><img src="${g.best.src}" loading="lazy"></div>${g.sub.map(s=>`<div class="media-item sim-sub sel-item selected" data-size="${s.size}" onclick="toggleSel(this)"><img src="${s.src}" loading="lazy"><div class="bdg-bot" style="font-size:10px;">${s.size} MB</div><div class="chk">âœ“</div></div>`).join('')}</div></div>`).join('');
}
function renderMonths(){
  document.getElementById('month-list').innerHTML=monthData.map((m,i)=>{
    const pct=m.total>0?(m.reviewed/m.total*100).toFixed(0):0;
    const cntTxt=m.done?`<span style="color:rgba(0,232,181,.85);font-weight:700;">âœ“ å…¨${m.total}ä»¶ å®Œäº†</span>`:`<span>${m.reviewed}/${m.total} ä»¶ã‚’ç¢ºèªæ¸ˆã¿</span>`;
    const badge=m.done?`<div class="month-badge-wrap done">ğŸ†</div>`:`<div class="month-badge-wrap pend"><span class="pend-pct">${pct}%</span></div>`;
    const dLine=m.done?`<div class="done-bar"></div>`:'';
    return`<div class="month-row${m.done?' done-row':''}" onclick="openSwipeDetail(${i})"><div class="month-row-inner"><img class="month-thumb-img" src="${m.thumb}" loading="lazy"><div class="month-text"><div class="month-lbl">${m.label}</div><div class="month-cnt">${cntTxt}</div><div class="month-bar-wrap"><div class="month-bar-fill" style="width:${pct}%"></div></div></div>${badge}</div>${dLine}</div>`;
  }).join('');
}

/* â”€â”€ ã‚¹ãƒ¯ã‚¤ãƒ—è©³ç´° â”€â”€ */
function openSwipeDetail(idx){
  sdMonth=monthData[idx];
  // å®Œäº†æ¸ˆã¿ãªã‚‰å…ˆé ­ã‹ã‚‰ã€é€”ä¸­ãªã‚‰ç¶šãã‹ã‚‰
  sdIdx=sdMonth.done ? 0 : sdMonth.reviewed;
  sdMonthIdx=idx;
  document.getElementById('del-bar').classList.add('hidden-force');
  document.getElementById('main-header').style.display='none';
  document.getElementById('main-nav').style.display='none';
  document.querySelectorAll('.view').forEach(v=>v.classList.remove('active'));
  document.getElementById('swipe-detail').classList.add('active');
  document.getElementById('sd-completion').style.display='none';
  document.getElementById('sd-photo-area').style.display='';
  document.getElementById('sd-strip').style.display='';
  document.getElementById('sd-actions').style.display='';
  document.getElementById('sd-month-title').textContent=sdMonth.navLabel;
  renderSd();
}
function closeSwipeDetail(){
  document.getElementById('swipe-detail').classList.remove('active');
  document.getElementById('del-bar').classList.remove('hidden-force');
  document.getElementById('main-header').style.display='';
  document.getElementById('main-nav').style.display='';
  renderMonths(); // æœˆä¸€è¦§ã‚’æœ€æ–°çŠ¶æ…‹ã«æ›´æ–°
  switchTab('swipe');
}
function renderSd(){
  const m=sdMonth,tot=m.photos.length;
  const rev=sdIdx; // ã“ã‚Œã¾ã§ã«ç¢ºèªã—ãŸæšæ•°
  const pct=tot>0?(rev/tot*100).toFixed(0):0;
  document.getElementById('sd-prog-fill').style.width=pct+'%';
  document.getElementById('sd-prog-txt').textContent=`${rev}/${tot} ä»¶ã‚’ç¢ºèªæ¸ˆã¿`;
  // ç¾åœ¨ã®å†™çœŸï¼ˆsdIdxç•ªç›®ï¼‰
  const photo=m.photos[Math.min(sdIdx,tot-1)];
  document.getElementById('sd-main-img').src=photo.src;
  document.getElementById('sd-photo-meta').textContent=`${Math.min(sdIdx+1,tot)} / ${tot}`;
  document.getElementById('sd-strip').innerHTML=m.photos.slice(0,Math.min(20,tot)).map((p,i)=>
    `<img class="sd-strip-thumb${i===sdIdx?' active-thumb':''}" src="${imgPool[i%imgPool.length]}" loading="lazy" onclick="jumpSd(${i})">`
  ).join('');
}
function jumpSd(i){sdIdx=i;renderSd();}
function swipeAction(action){
  if(!sdMonth)return;
  const tot=sdMonth.photos.length;
  sdIdx++; // æ¬¡ã®å†™çœŸã¸
  sdMonth.reviewed=sdIdx;
  if(sdIdx>=tot){
    // å…¨ä»¶å®Œäº†ï¼
    sdMonth.done=true;
    sdMonth.reviewed=tot;
    // ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ã‚’100%ã«æ›´æ–°ã—ã¦ã‹ã‚‰å®Œäº†ç”»é¢ã¸
    document.getElementById('sd-prog-fill').style.width='100%';
    document.getElementById('sd-prog-txt').textContent=`${tot}/${tot} ä»¶ã‚’ç¢ºèªæ¸ˆã¿`;
    setTimeout(showCompletion, 300);
  } else {
    renderSd();
  }
}
const guideContent={
  similar:{
    title:'ä¼¼ã¦ã„ã‚‹å†™çœŸã‚’æ•´ç†',icon:'ğŸ“·',
    imgVar:'bunny2',
    tag:'é¡ä¼¼å†™çœŸã®æ•´ç†',
    steps:[
      {title:'ãƒ›ãƒ¼ãƒ ã‹ã‚‰é–‹ã',desc:'ãƒ›ãƒ¼ãƒ ç”»é¢ã®ã€Œä¼¼ã¦ã„ã‚‹å†™çœŸã€ã‚«ãƒ¼ãƒ‰ã‚’ã‚¿ãƒƒãƒ—ã—ã¾ã™ã€‚'},
      {title:'ã‚°ãƒ«ãƒ¼ãƒ—ã‚’ç¢ºèª',desc:'åŒã˜ã‚·ãƒ¼ãƒ³ã§æ’®å½±ã—ãŸå†™çœŸãŒã‚°ãƒ«ãƒ¼ãƒ—åŒ–ã•ã‚Œã¦è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚â˜…æœ€é«˜ã®1æšãŒè‡ªå‹•ã§é¸ã°ã‚Œã¦ã„ã¾ã™ã€‚'},
      {title:'å‰Šé™¤ã—ãŸã„å†™çœŸã‚’é¸ã¶',desc:'ä¸è¦ãªå†™çœŸã‚’ã‚¿ãƒƒãƒ—ã™ã‚‹ã¨é¸æŠçŠ¶æ…‹ï¼ˆèµ¤ãƒã‚§ãƒƒã‚¯ï¼‰ã«ãªã‚Šã¾ã™ã€‚ã‚°ãƒ«ãƒ¼ãƒ—å†…ã®ã€Œå…¨ã¦é¸æŠã€ã‚‚ä½¿ãˆã¾ã™ã€‚'},
      {title:'å‰Šé™¤ã‚’å®Ÿè¡Œ',desc:'ä¸‹éƒ¨ã®ã€Œå‰Šé™¤ã€ãƒœã‚¿ãƒ³ã‚’ã‚¿ãƒƒãƒ—ã™ã‚‹ã¨é¸æŠã—ãŸå†™çœŸãŒã¾ã¨ã‚ã¦å‰Šé™¤ã•ã‚Œã¾ã™ã€‚'},
    ],
    cta:'ä¼¼ã¦ã„ã‚‹å†™çœŸã‚’æ•´ç†ã™ã‚‹',ctaTab:'similar-photos'
  },
  videos:{
    title:'å‹•ç”»ã‚’æ•´ç†ã™ã‚‹',icon:'ğŸ¬',
    imgVar:'bird1',
    tag:'å‹•ç”»ã®æ•´ç†',
    steps:[
      {title:'ãƒ›ãƒ¼ãƒ ã‹ã‚‰é–‹ã',desc:'ãƒ›ãƒ¼ãƒ ç”»é¢ã®ã€Œå‹•ç”»ã‚’æ•´ç†ã€ã‚«ãƒ¼ãƒ‰ã‚’ã‚¿ãƒƒãƒ—ã—ã¾ã™ã€‚'},
      {title:'ã‚µã‚¤ã‚ºã¨æ™‚é–“ã‚’ç¢ºèª',desc:'å„å‹•ç”»ã«ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºï¼ˆGBï¼‰ã¨å†ç”Ÿæ™‚é–“ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚å¤§ãã„ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰å„ªå…ˆçš„ã«ç¢ºèªã—ã¾ã—ã‚‡ã†ã€‚'},
      {title:'å‰Šé™¤ã™ã‚‹å‹•ç”»ã‚’é¸æŠ',desc:'ä¸è¦ãªå‹•ç”»ã‚’ã‚¿ãƒƒãƒ—ã—ã¦é¸æŠã—ã¾ã™ã€‚ã€Œå…¨ã¦é¸æŠã™ã‚‹ã€ã§ä¸€æ‹¬é¸æŠã‚‚å¯èƒ½ã§ã™ã€‚'},
      {title:'å‰Šé™¤ã‚’å®Ÿè¡Œ',desc:'ã€Œå‰Šé™¤ã€ãƒœã‚¿ãƒ³ã‚’ã‚¿ãƒƒãƒ—ã—ã¦é¸æŠã—ãŸå‹•ç”»ã‚’å‰Šé™¤ã—ã¾ã™ã€‚'},
    ],
    cta:'å‹•ç”»ã‚’æ•´ç†ã™ã‚‹',ctaTab:'videos'
  },
  raw:{
    title:'RAWãƒ‡ãƒ¼ã‚¿ã‚’å‰Šé™¤',icon:'ğŸ“„',
    imgVar:'cat2',
    tag:'RAWãƒ•ã‚¡ã‚¤ãƒ«ã®æ•´ç†',
    steps:[
      {title:'ãƒ›ãƒ¼ãƒ ã‹ã‚‰é–‹ã',desc:'ãƒ›ãƒ¼ãƒ ç”»é¢ã®ã€ŒRAWãƒ‡ãƒ¼ã‚¿ã€ã‚«ãƒ¼ãƒ‰ã‚’ã‚¿ãƒƒãƒ—ã—ã¾ã™ã€‚'},
      {title:'RAWãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç¢ºèª',desc:'RAWå½¢å¼ã§æ’®å½±ã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ãŒä¸€è¦§è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚å¯¾å¿œã™ã‚‹JPEGã¯ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã«æ®‹ã‚Šã¾ã™ã€‚'},
      {title:'å‰Šé™¤ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠ',desc:'ä¸è¦ãªRAWãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¿ãƒƒãƒ—ã—ã¦é¸æŠã—ã¾ã™ã€‚ã‚µã‚¤ã‚ºãŒå¤§ãã„ã‚‚ã®ã‹ã‚‰å‰Šé™¤ã™ã‚‹ã®ãŒãŠã™ã™ã‚ã§ã™ã€‚'},
      {title:'å‰Šé™¤ã‚’å®Ÿè¡Œ',desc:'ã€Œå‰Šé™¤ã€ãƒœã‚¿ãƒ³ã‚’ã‚¿ãƒƒãƒ—ã€‚JPEGã¯ãã®ã¾ã¾æ®‹ã‚Šã€RAWãƒ•ã‚¡ã‚¤ãƒ«ã®ã¿å‰Šé™¤ã•ã‚Œã¾ã™ã€‚'},
    ],
    cta:'RAWãƒ‡ãƒ¼ã‚¿ã‚’æ•´ç†ã™ã‚‹',ctaTab:'raw-photos'
  },
  screenshots:{
    title:'ã‚¹ã‚¯ã‚·ãƒ§ã‚’ä¸€æ‹¬å‰Šé™¤',icon:'ğŸ–¼ï¸',
    imgVar:'dog2',
    tag:'ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã®æ•´ç†',
    steps:[
      {title:'ãƒ›ãƒ¼ãƒ ã‹ã‚‰é–‹ã',desc:'ãƒ›ãƒ¼ãƒ ç”»é¢ã®ã€Œã‚¹ã‚¯ã‚·ãƒ§ã€ã‚«ãƒ¼ãƒ‰ã‚’ã‚¿ãƒƒãƒ—ã—ã¾ã™ã€‚'},
      {title:'ã‚¹ã‚¯ã‚·ãƒ§ä¸€è¦§ã‚’ç¢ºèª',desc:'ä¿å­˜ã•ã‚Œã¦ã„ã‚‹ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆãŒä¸€è¦§è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚'},
      {title:'å‰Šé™¤ã™ã‚‹ã‚¹ã‚¯ã‚·ãƒ§ã‚’é¸æŠ',desc:'ä¸è¦ãªã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã‚’ã‚¿ãƒƒãƒ—ã—ã¦é¸æŠã€‚ã€Œå…¨ã¦é¸æŠã™ã‚‹ã€ã§ä¸€æ‹¬é¸æŠã‚‚å¯èƒ½ã§ã™ã€‚'},
      {title:'å‰Šé™¤ã‚’å®Ÿè¡Œ',desc:'ã€Œå‰Šé™¤ã€ãƒœã‚¿ãƒ³ã§é¸æŠã—ãŸã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã‚’ã¾ã¨ã‚ã¦å‰Šé™¤ã—ã¾ã™ã€‚'},
    ],
    cta:'ã‚¹ã‚¯ã‚·ãƒ§ã‚’æ•´ç†ã™ã‚‹',ctaTab:'screenshots'
  }
};
const svgMap={cat1,cat2,dog1,dog2,bunny1,bunny2,bird1,bird2,bird3};
function openGuideDetail(key){
  const c=guideContent[key];
  const imgSrc=svgMap[c.imgVar]||cat1;
  document.getElementById('gd-title').textContent=c.title;
  document.getElementById('gd-body').innerHTML=`
    <div class="gd-hero" style="background-image:url('${imgSrc}')">
      <div class="gd-hero-inner">
        <div class="gd-hero-tag">${c.icon} ${c.tag}</div>
        <div class="gd-hero-title">${c.title}</div>
      </div>
    </div>
    <div style="font-size:11px;font-weight:700;color:var(--text-sub);text-transform:uppercase;letter-spacing:1.2px;margin-bottom:12px;">æ‰‹é †</div>
    <div class="gd-step-list">
      ${c.steps.map((s,i)=>`<div class="gd-step"><div class="gd-step-num">${i+1}</div><div class="gd-step-body"><h4>${s.title}</h4><p>${s.desc}</p></div></div>`).join('')}
    </div>
    <button class="gd-cta" onclick="closeGuideDetail();switchTab('${c.ctaTab}')">${c.cta} â†’</button>
  `;
  const ov=document.getElementById('guide-detail-overlay');
  ov.style.display='flex';
}
function closeGuideDetail(){
  document.getElementById('guide-detail-overlay').style.display='none';
}

/* â”€â”€ å®Œäº†ç”»é¢è¡¨ç¤º â”€â”€ */
function showCompletion(){
  const m=sdMonth;
  document.getElementById('sd-photo-area').style.display='none';
  document.getElementById('sd-strip').style.display='none';
  document.getElementById('sd-actions').style.display='none';
  document.getElementById('comp-sub-text').textContent=`${m.navLabel}ã®å†™çœŸ${m.total}æšã‚’å…¨ã¦ç¢ºèªã—ã¾ã—ãŸï¼`;
  document.getElementById('comp-stats').innerHTML=`<strong>${m.total}</strong> æš ã™ã¹ã¦ç¢ºèªæ¸ˆã¿`;
  const comp=document.getElementById('sd-completion');
  comp.style.display='flex';
  // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ãƒªã‚»ãƒƒãƒˆ
  const trophy=comp.querySelector('.comp-trophy');
  trophy.style.animation='none';
  void trophy.offsetWidth;
  trophy.style.animation='';
}
function goBack(){switchTab('home');}
function switchTab(id){
  currentTab=id;
  document.querySelectorAll('.view').forEach(v=>v.classList.remove('active'));
  document.getElementById(id).classList.add('active');
  document.querySelectorAll('.nav-item[data-target]').forEach(n=>n.classList.toggle('active',n.dataset.target===id));
  const title=document.getElementById('hdr-title'),sub=document.getElementById('hdr-sub'),back=document.getElementById('back-btn'),act=document.getElementById('hdr-actions');
  sub.style.display='block';back.style.display='block';act.style.display='flex';
  document.getElementById('del-bar').classList.remove('show');
  checkSelState();
  const top=['home','swipe','guide'];
  if(top.includes(id)){sub.style.display='none';back.style.display='none';act.style.display='none';}
  const titles={home:'ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸',swipe:'ã‚¹ãƒ¯ã‚¤ãƒ—',guide:'ã‚¬ã‚¤ãƒ‰','raw-photos':'RAW','similar-photos':'ä¼¼ã¦ã„ã¾ã™',videos:'å‹•ç”»ã‚’æ•´ç†',screenshots:'ã‚¹ã‚¯ã‚·ãƒ§'};
  const subs={'raw-photos':`${rawData.length}å€‹ã®é …ç›®`,'similar-photos':'1,088æšã®å†™çœŸ (24.4 GB)',videos:`${vidData.length} ã‚¢ã‚¤ãƒ†ãƒ  (299 GB)`,screenshots:`${ssData.length}æšã®å†™çœŸ (193 MB)`};
  title.innerText=titles[id]||id;
  if(subs[id])sub.innerText=subs[id];
  if(!top.includes(id))updateDelBtn();
  // ã‚½ãƒ¼ãƒˆãƒœã‚¿ãƒ³ï¼šRAWãƒ»å‹•ç”»ãƒ»ã‚¹ã‚¯ã‚·ãƒ§ã®ã¿è¡¨ç¤º
  const sortableTabs=['raw-photos','videos','screenshots'];
  const sortBtn=document.getElementById('sort-btn');
  if(sortBtn) sortBtn.style.display=sortableTabs.includes(id)?'flex':'none';
  // ã‚¿ãƒ–åˆ‡æ›¿æ™‚ã«ã‚½ãƒ¼ãƒˆã‚’ãƒªã‚»ãƒƒãƒˆ
  if(sortableTabs.includes(id)){
    currentSort='newest';
    document.querySelectorAll('.sort-option').forEach(el=>el.classList.toggle('active',el.dataset.sort==='newest'));
  }
}
function toggleSel(el){el.classList.toggle('selected');checkSelState();updateDelBtn();}
function toggleGrpSel(gid){
  const g=document.getElementById(gid),btn=g.querySelector('.grp-sel-btn'),sel=btn.innerText==='å…¨ã¦é¸æŠã™ã‚‹';
  g.querySelectorAll('.sel-item').forEach(el=>el.classList.toggle('selected',sel));
  btn.innerText=sel?'ã™ã¹ã¦ã®é¸æŠã‚’è§£é™¤':'å…¨ã¦é¸æŠã™ã‚‹';
  checkSelState();updateDelBtn();
}
function toggleSelectAll(){
  const view=document.querySelector('.view.active');isAllSel=!isAllSel;
  view.querySelectorAll('.sel-item').forEach(el=>el.classList.toggle('selected',isAllSel));
  updateSelBtn();updateDelBtn();
}
function checkSelState(){
  const view=document.querySelector('.view.active');if(!view)return;
  const tot=view.querySelectorAll('.sel-item').length,sel=view.querySelectorAll('.sel-item.selected').length;
  isAllSel=tot>0&&tot===sel;updateSelBtn();
}
function updateSelBtn(){
  const btn=document.getElementById('sel-all-btn');
  if(isAllSel){btn.innerHTML='âŠ— ã™ã¹ã¦ã®é¸æŠã‚’è§£é™¤';document.querySelectorAll('.grp-sel-btn').forEach(e=>e.innerText='ã™ã¹ã¦ã®é¸æŠã‚’è§£é™¤');}
  else{btn.innerHTML='âœ“ å…¨ã¦é¸æŠã™ã‚‹';document.querySelectorAll('.grp-sel-btn').forEach(e=>e.innerText='å…¨ã¦é¸æŠã™ã‚‹');}
}
function updateDelBtn(){
  const view=document.querySelector('.view.active');if(!view||['home','swipe','guide'].includes(currentTab))return;
  const sel=view.querySelectorAll('.sel-item.selected'),bar=document.getElementById('del-bar'),txt=document.getElementById('del-txt');
  if(sel.length>0){
    let mb=0;sel.forEach(el=>mb+=parseFloat(el.dataset.size||0));
    const sz=mb>1000?`${(mb/1000).toFixed(2)} GB`:`${mb.toFixed(1)} MB`;
    const lbls={'raw-photos':'RAWãƒ‡ãƒ¼ã‚¿','similar-photos':'é¡ä¼¼ã‚¢ã‚¤ãƒ†ãƒ ',videos:'å‹•ç”»',screenshots:'ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ'};
    txt.innerText=`${sel.length}ä»¶ã®${lbls[currentTab]||'ã‚¢ã‚¤ãƒ†ãƒ '}ã‚’å‰Šé™¤ (${sz})`;bar.classList.add('show');
  }else{bar.classList.remove('show');}
}
function deleteSelected(){
  const view=document.querySelector('.view.active'),sel=view.querySelectorAll('.sel-item.selected');
  sel.forEach(el=>{el.style.transform='scale(.5)';el.style.opacity='0';el.style.transition='all .25s';});
  setTimeout(()=>{
    sel.forEach(el=>el.remove());
    if(currentTab==='similar-photos')document.querySelectorAll('.sim-group').forEach(g=>{if(!g.querySelector('.sim-sub'))g.style.display='none';});
    updateDelBtn();
    if(!view.querySelector('.sel-item'))switchTab('home');
  },280);
}
</script>
</body>
</html>
