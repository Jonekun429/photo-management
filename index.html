<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Cleaner Pro - Swipe Update</title>
    <style>
        :root {
            --bg:#04100e;--card:#0c1f1b;--card2:#153029;--text:#eaf5f2;--sub:#5a7d75;--dim:#3d5c54;
            --pri:#005D4D;--pri2:#00896e;--bright:#00b894;--grad:linear-gradient(135deg,#005D4D,#00896e);
            --glow:rgba(0,93,77,.25);--danger:#ff4757;--dgrad:linear-gradient(135deg,#ff4757,#ff6b7a);
            --amber:#ffb142;--badge:rgba(4,16,14,.82);--bdr:rgba(0,93,77,.12);--bdr2:rgba(0,93,77,.3);
            --sh:0 8px 32px rgba(0,0,0,.4);--rl:20px;--rm:14px;--rs:10px;
        }
        *{box-sizing:border-box;margin:0;padding:0;-webkit-tap-highlight-color:transparent}
        body{font-family:-apple-system,BlinkMacSystemFont,"SF Pro Display","Helvetica Neue",sans-serif;background:#000;display:flex;justify-content:center;touch-action:manipulation;-webkit-font-smoothing:antialiased}
        #app{width:100%;max-width:414px;height:100vh;height:100dvh;background:var(--bg);color:var(--text);position:relative;display:flex;flex-direction:column;overflow:hidden}

        header{padding:52px 20px 10px;display:flex;flex-direction:column;gap:10px;z-index:20;background:var(--bg);flex-shrink:0}
        .h-top{display:flex;justify-content:space-between;align-items:center;height:36px}
        .back{font-size:24px;cursor:pointer;display:none;padding:4px 14px 4px 0;color:var(--bright);transition:opacity .2s;font-weight:300}
        .back:active{opacity:.4}
        .h-act{display:none;gap:8px;align-items:center}
        .pill{background:var(--card);color:var(--text);border:1px solid var(--bdr);border-radius:20px;padding:7px 13px;font-size:11.5px;font-weight:600;cursor:pointer;display:flex;align-items:center;gap:5px;transition:all .2s}
        .pill:active{transform:scale(.95);background:var(--card2)}
        .ib{width:36px;height:36px;justify-content:center;padding:0;border-radius:50%;font-size:15px}
        .h-tr{display:flex;justify-content:space-between;align-items:flex-end}
        h1{font-size:28px;font-weight:700;letter-spacing:-.5px}
        .h-sub{font-size:12.5px;color:var(--sub);margin-top:2px;display:none}
        .gear{background:var(--card);border:1px solid var(--bdr);border-radius:50%;width:38px;height:38px;display:flex;justify-content:center;align-items:center;font-size:17px;cursor:pointer}

        .view{flex:1;overflow-y:auto;padding:0 20px 110px;display:none;-webkit-overflow-scrolling:touch;scrollbar-width:none}
        .view::-webkit-scrollbar{display:none}
        .view.active{display:block;animation:fi .3s ease}
        @keyframes fi{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}

        .del-bar{position:absolute;bottom:80px;left:0;width:100%;padding:12px 20px;background:linear-gradient(to top,var(--bg) 70%,transparent);z-index:30;transform:translateY(110%);transition:transform .35s cubic-bezier(.25,.8,.25,1)}
        .del-bar.show{transform:translateY(0)}
        .btn-del{width:100%;padding:15px;background:var(--dgrad);color:#fff;border:none;border-radius:var(--rm);font-size:14.5px;font-weight:700;cursor:pointer;box-shadow:0 6px 20px rgba(255,71,87,.3);display:flex;justify-content:center;align-items:center;gap:8px}

        .sel{position:relative;cursor:pointer;border:2.5px solid transparent;transition:all .25s;overflow:hidden;background:var(--card)}
        .sel.ck{border-color:var(--danger);border-radius:14px!important}
        .sel.ck img{filter:brightness(.65)}
        .chk{position:absolute;bottom:8px;right:8px;width:24px;height:24px;border:2px solid rgba(255,255,255,.6);border-radius:7px;display:flex;justify-content:center;align-items:center;color:transparent;font-size:13px;font-weight:bold;z-index:10;background:rgba(0,0,0,.35);backdrop-filter:blur(4px)}
        .sel.ck .chk{background:var(--danger);border-color:var(--danger);color:#fff;transform:scale(1.08)}

        /* Home */
        .sto-row{display:flex;justify-content:space-between;align-items:baseline;margin-bottom:10px}
        .sto-u{font-size:12.5px;color:var(--sub)}.sto-u strong{color:var(--bright);font-weight:600}
        .sto-p{font-size:11px;font-weight:700;color:var(--amber);background:rgba(255,177,66,.1);padding:3px 8px;border-radius:6px}
        .prog{width:100%;height:5px;background:rgba(255,255,255,.04);border-radius:3px;overflow:hidden}
        .pf{width:0;height:100%;background:var(--grad);border-radius:3px;transition:width 1.2s cubic-bezier(.25,.46,.45,.94)}.pf.go{width:82%}
        
        .gh{display:grid;grid-template-columns:1fr 1fr;gap:13px;margin-top:22px}
        .gc{border-radius:var(--rl);height:155px;position:relative;overflow:hidden;display:flex;flex-direction:column;justify-content:flex-end;padding:15px;cursor:pointer;background-size:cover;background-position:center;box-shadow:var(--sh)}
        .gc.full{grid-column: 1 / -1; height: 110px;} /* ã™ã¹ã¦ã®å†™çœŸç”¨ ãƒ•ãƒ«å¹… */
        .gc::before{content:'';position:absolute;inset:0;background:linear-gradient(to top,rgba(0,0,0,.88) 0%,rgba(0,0,0,.25) 55%,rgba(0,0,0,.08) 100%);z-index:1}
        .gc>div{position:relative;z-index:2}
        .gc.all-photos{background-image:url('https://images.unsplash.com/photo-1529626455594-4ff0802cfb7e?w=600&q=80'); background-position: top;}
        .gc.photos{background-image:url('https://images.unsplash.com/photo-1531306728370-53bfd6202e88?w=400&q=80')}
        .gc.videos{background-image:url('https://images.unsplash.com/photo-1535016120720-40c68798625c?w=400&q=80')}
        .gc.screenshots{background-image:url('https://images.unsplash.com/photo-1550745165-9bc0b252726f?w=400&q=80')}
        .gc.raw{background-image:url('https://images.unsplash.com/photo-1516807869374-4b53db6fcbf4?w=400&q=80')}
        .gc h3{font-size:12.5px;font-weight:500;margin-bottom:2px;opacity:.7}
        .gc p{font-size:21px;font-weight:700;letter-spacing:-.3px}
        .gc.full p{font-size:26px;}
        .gc .cnt{font-size:10.5px;color:rgba(255,255,255,.45);margin-top:1px}

        /* Media Grid */
        .mg{display:grid;grid-template-columns:1fr 1fr;gap:10px}
        .mi{border-radius:var(--rm);aspect-ratio:4/5;position:relative;opacity:0;animation:pop .35s ease forwards}
        .mi img{width:100%;height:100%;object-fit:cover;display:block;border-radius:inherit}
        @keyframes pop{from{opacity:0;transform:scale(.93)}to{opacity:1;transform:scale(1)}}
        .sz-t{position:absolute;bottom:8px;left:8px;background:var(--badge);backdrop-filter:blur(6px);color:#fff;font-size:11.5px;font-weight:600;padding:4px 9px;border-radius:7px;z-index:2}

        /* ----- ã‚¹ãƒ¯ã‚¤ãƒ—æ©Ÿèƒ½ (æ–°è¨­) ----- */
        .swipe-header-stats { display: flex; gap: 10px; margin-bottom: 20px; }
        .stat-box { flex: 1; background: var(--card); border: 1px solid var(--bdr); border-radius: var(--rm); padding: 12px; display: flex; align-items: center; gap: 10px; }
        .stat-ic { font-size: 24px; }
        .stat-v { font-size: 16px; font-weight: bold; }
        .stat-l { font-size: 10px; color: var(--sub); }

        .month-list { display: flex; flex-direction: column; gap: 12px; }
        .month-card { background: var(--card); border: 1px solid var(--bdr); border-radius: var(--rm); padding: 15px; display: flex; gap: 15px; align-items: center; cursor: pointer; transition: transform .2s; }
        .month-card:active { transform: scale(0.98); background: var(--card2); }
        .mc-thumb { width: 60px; height: 60px; border-radius: 10px; background-size: cover; background-position: center; flex-shrink: 0; position: relative; }
        .mc-thumb.done::after { content: 'âœ“'; position: absolute; inset: 0; background: rgba(0,0,0,0.5); display: flex; align-items: center; justify-content: center; font-size: 24px; color: #fff; border-radius: inherit; }
        .mc-info { flex: 1; }
        .mc-title { font-size: 16px; font-weight: bold; margin-bottom: 6px; display: flex; justify-content: space-between; }
        .mc-medal { font-size: 20px; opacity: 0.3; }
        .mc-medal.active { opacity: 1; }
        .mc-prog-text { font-size: 11px; color: var(--sub); margin-bottom: 4px; }
        .mc-prog-bar { width: 100%; height: 4px; background: rgba(255,255,255,0.06); border-radius: 2px; overflow: hidden; }
        .mc-prog-fill { height: 100%; background: var(--bright); border-radius: 2px; transition: width 0.3s; }

        /* ã‚¹ãƒ¯ã‚¤ãƒ— ãƒ—ãƒ¬ã‚¤ç”»é¢ */
        #swipe-play { display: none; flex-direction: column; height: 100%; padding-bottom: 20px; }
        .sp-top { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; }
        .sp-prog-wrap { flex: 1; margin: 0 15px; }
        .sp-counts { font-size: 11px; color: var(--sub); text-align: right; margin-bottom: 4px; }
        .sp-img-container { flex: 1; background: var(--card); border-radius: var(--rl); position: relative; overflow: hidden; box-shadow: var(--sh); display: flex; align-items: center; justify-content: center; }
        .sp-img { max-width: 100%; max-height: 100%; object-fit: contain; border-radius: var(--rl); transition: transform 0.3s ease, opacity 0.3s ease; }
        /* ã‚¹ãƒ¯ã‚¤ãƒ—ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ç”¨ã‚¯ãƒ©ã‚¹ */
        .swipe-left { transform: translateX(-100%) rotate(-10deg); opacity: 0; }
        .swipe-right { transform: translateX(100%) rotate(10deg); opacity: 0; }
        
        .sp-actions { display: flex; justify-content: center; gap: 20px; margin-top: 25px; }
        .sp-btn { width: 70px; height: 70px; border-radius: 50%; border: none; display: flex; align-items: center; justify-content: center; font-size: 28px; cursor: pointer; transition: transform 0.1s; box-shadow: 0 4px 15px rgba(0,0,0,0.3); }
        .sp-btn:active { transform: scale(0.9); }
        .btn-dislike { background: var(--card); color: var(--danger); border: 2px solid var(--danger); }
        .btn-like { background: var(--card); color: var(--bright); border: 2px solid var(--bright); }
        .sp-btn.btn-dislike:active { background: var(--danger); color: #fff; }
        .sp-btn.btn-like:active { background: var(--bright); color: #fff; }

        .empty { display:none; flex-direction:column; align-items:center; justify-content:center; padding:60px 20px; text-align:center; animation:fi .5s ease; }
        .e-ic { width:76px; height:76px; background:linear-gradient(135deg,rgba(0,93,77,.18),rgba(0,184,148,.08)); border:1px solid rgba(0,93,77,.18); border-radius:50%; display:flex; align-items:center; justify-content:center; font-size:34px; margin-bottom:18px; }
        
        nav{position:absolute;bottom:0;left:0;width:100%;height:78px;background:rgba(4,16,14,.94);backdrop-filter:blur(25px);-webkit-backdrop-filter:blur(25px);display:flex;justify-content:space-around;align-items:center;padding-bottom:18px;border-top:1px solid var(--bdr);z-index:40}
        .ni{display:flex;flex-direction:column;align-items:center;color:var(--dim);font-size:10px;cursor:pointer;transition:color .25s;padding:4px 10px;font-weight:500}
        .ni.on{color:var(--bright)}
        .nic{font-size:22px;margin-bottom:2px}
        .nd{width:4px;height:4px;border-radius:50%;background:var(--bright);margin-top:2px;opacity:0;transition:opacity .25s}
        .ni.on .nd{opacity:1}
    </style>
</head>
<body>
<div id="app">
    <header>
        <div class="h-top">
            <div id="back" class="back" onclick="goBack()">â€¹</div>
            <div id="act" class="h-act">
                <button class="pill" id="sa-btn" onclick="toggleAll()">â˜‘ ã™ã¹ã¦é¸æŠ</button>
            </div>
            <div id="gear" class="gear">âš™</div>
        </div>
        <div class="h-tr">
            <div><h1 id="title">ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸</h1><div id="sub" class="h-sub"></div></div>
        </div>
    </header>

    <main id="home" class="view active">
        <div>
            <div class="sto-row">
                <div class="sto-u"><strong id="sto-txt">42.5 GB</strong> / 128 GB</div>
                <div class="sto-p" id="sto-pct">33%</div>
            </div>
            <div class="prog"><div class="pf" id="prog" style="width: 33%;"></div></div>

            <div class="gh" id="home-grid">
                <div class="gc full all-photos" onclick="go('all')">
                    <div><h3>ã™ã¹ã¦ã®å†™çœŸ</h3><p id="h-all-sz">42.5 GB</p><div class="cnt" id="h-all-cnt">5,200 æš</div></div>
                </div>

                <div class="gc photos" onclick="go('similar')">
                    <div><h3>ä¼¼ã¦ã„ã‚‹å†™çœŸ</h3><p>24.4 GB</p><div class="cnt">1,088 æš</div></div>
                </div>
                <div class="gc raw" onclick="go('raw')">
                    <div><h3>RAWãƒ‡ãƒ¼ã‚¿</h3><p>12 GB</p><div class="cnt">210 å€‹</div></div>
                </div>
                <div class="gc videos" onclick="go('videos')">
                    <div><h3>å‹•ç”»</h3><p>5.1 GB</p><div class="cnt">42 æœ¬</div></div>
                </div>
                <div class="gc screenshots" onclick="go('ss')">
                    <div><h3>ã‚¹ã‚¯ã‚·ãƒ§</h3><p>193 MB</p><div class="cnt">78 æš</div></div>
                </div>
            </div>
        </div>
    </main>

    <main id="all" class="view">
        <div id="all-grid" class="mg"></div>
    </main>

    <main id="similar" class="view"><div class="empty" style="display:flex"><div class="e-ic">âœ¨</div><h3>æº–å‚™ä¸­</h3><p>ãƒ‡ãƒ¢ç”»é¢ã§ã™</p></div></main>
    <main id="raw" class="view"><div class="empty" style="display:flex"><div class="e-ic">âœ¨</div><h3>æº–å‚™ä¸­</h3><p>ãƒ‡ãƒ¢ç”»é¢ã§ã™</p></div></main>
    <main id="videos" class="view"><div class="empty" style="display:flex"><div class="e-ic">âœ¨</div><h3>æº–å‚™ä¸­</h3><p>ãƒ‡ãƒ¢ç”»é¢ã§ã™</p></div></main>
    <main id="ss" class="view"><div class="empty" style="display:flex"><div class="e-ic">âœ¨</div><h3>æº–å‚™ä¸­</h3><p>ãƒ‡ãƒ¢ç”»é¢ã§ã™</p></div></main>

    <main id="swipe" class="view">
        <div id="swipe-list-view">
            <div class="swipe-header-stats">
                <div class="stat-box"><div class="stat-ic">ğŸ…</div><div><div class="stat-l">å ±é…¬</div><div class="stat-v">19/20</div></div></div>
                <div class="stat-box"><div class="stat-ic">ğŸ§¹</div><div><div class="stat-l">ã‚¯ãƒªãƒ¼ãƒ‹ãƒ³ã‚°æ¸ˆã¿</div><div class="stat-v">42.51 GB</div></div></div>
            </div>
            <div class="month-list" id="month-list-container">
                </div>
        </div>

        <div id="swipe-play">
            <div class="sp-top">
                <div class="sp-prog-wrap">
                    <div class="sp-counts"><span id="sp-curr">0</span> / <span id="sp-total">0</span> ä»¶ã‚’ç¢ºèªæ¸ˆã¿</div>
                    <div class="mc-prog-bar"><div class="mc-prog-fill" id="sp-prog-bar" style="width: 0%;"></div></div>
                </div>
            </div>
            <div class="sp-img-container">
                <img id="sp-img" class="sp-img" src="" alt="Swipe Image">
                <div class="sz-t" id="sp-size" style="bottom: 15px; left: 15px; font-size: 14px;">2.5 MB</div>
            </div>
            <div class="sp-actions">
                <button class="sp-btn btn-dislike" onclick="handleSwipe('del')">ğŸ‘</button>
                <button class="sp-btn btn-like" onclick="handleSwipe('keep')">ğŸ‘</button>
            </div>
        </div>
    </main>

    <div id="del-bar" class="del-bar"><button class="btn-del"><span>ğŸ—‘</span>å‰Šé™¤</button></div>

    <nav>
        <div class="ni on" data-t="home"><div class="nic">ğŸ </div><span>ãƒ›ãƒ¼ãƒ </span><div class="nd"></div></div>
        <div class="ni" data-t="similar"><div class="nic">âœ‰ï¸</div><span>ãƒ¡ãƒ¼ãƒ«</span><div class="nd"></div></div>
        <div class="ni" data-t="swipe"><div class="nic">ğŸƒ</div><span>ã‚¹ãƒ¯ã‚¤ãƒ—</span><div class="nd"></div></div>
        <div class="ni" data-t="raw"><div class="nic">â˜ï¸</div><span>ã‚¯ãƒ©ã‚¦ãƒ‰</span><div class="nd"></div></div>
        <div class="ni" data-t="ss"><div class="nic">â•</div><span>è¿½åŠ </span><div class="nd"></div></div>
    </nav>
</div>

<script>
// ãƒ‡ãƒ¢ç”¨ç”»åƒãƒªã‚¹ãƒˆ
const ALL_PHOTOS = [
    { src:'https://images.unsplash.com/photo-1529626455594-4ff0802cfb7e?w=400&q=80', sz: 3.2 },
    { src:'https://images.unsplash.com/photo-1531306728370-53bfd6202e88?w=400&q=80', sz: 4.1 },
    { src:'https://images.unsplash.com/photo-1506157786151-b8491531f063?w=400&q=80', sz: 2.8 },
    { src:'https://images.unsplash.com/photo-1621360841013-c76831f1a301?w=400&q=80', sz: 5.5 },
    { src:'https://images.unsplash.com/photo-1550745165-9bc0b252726f?w=400&q=80', sz: 1.2 },
    { src:'https://images.unsplash.com/photo-1516807869374-4b53db6fcbf4?w=400&q=80', sz: 6.0 }
];

// ã‚¹ãƒ¯ã‚¤ãƒ—æ©Ÿèƒ½ç”¨ã®æœˆåˆ¥ãƒ‡ãƒ¼ã‚¿æ§‹é€ 
const SWIPE_MONTHS = [
    { id: '2026-02', title: '2æœˆ, 2026', total: 1102, done: 697, thumb: 'https://images.unsplash.com/photo-1531306728370-53bfd6202e88?w=200&q=80' },
    { id: '2026-01', title: '1æœˆ, 2026', total: 1373, done: 1373, thumb: 'https://images.unsplash.com/photo-1529626455594-4ff0802cfb7e?w=200&q=80' },
    { id: '2025-12', title: '12æœˆ, 2025', total: 998, done: 998, thumb: 'https://images.unsplash.com/photo-1506157786151-b8491531f063?w=200&q=80' },
    { id: '2025-11', title: '11æœˆ, 2025', total: 642, done: 642, thumb: 'https://images.unsplash.com/photo-1516807869374-4b53db6fcbf4?w=200&q=80' }
];

let currentView = 'home';
let swipeActiveMonth = null;
let swipeImages = []; // ãƒ—ãƒ¬ã‚¤ä¸­ã®ç”»åƒé…åˆ—

function init() {
    // ã™ã¹ã¦ã®å†™çœŸã®æç”»
    const grid = document.getElementById('all-grid');
    grid.innerHTML = ALL_PHOTOS.map((p, i) => `
        <div class="mi sel" data-sz="${p.sz}" style="animation-delay:${i*.05}s" onclick="this.classList.toggle('ck')">
            <img src="${p.src}" loading="lazy"><div class="sz-t">${p.sz} MB</div><div class="chk">âœ“</div>
        </div>
    `).join('');

    // ã‚¹ãƒ¯ã‚¤ãƒ—æœˆåˆ¥ãƒªã‚¹ãƒˆã®æç”»
    renderSwipeList();

    // ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã‚¤ãƒ™ãƒ³ãƒˆ
    document.querySelectorAll('.ni').forEach(n => {
        n.addEventListener('click', (e) => {
            const t = e.currentTarget.dataset.t;
            document.querySelectorAll('.ni').forEach(x => x.classList.remove('on'));
            e.currentTarget.classList.add('on');
            go(t);
        });
    });
}

function renderSwipeList() {
    const cont = document.getElementById('month-list-container');
    cont.innerHTML = SWIPE_MONTHS.map(m => {
        const pct = (m.done / m.total) * 100;
        const isComp = m.done === m.total;
        return `
            <div class="month-card" onclick="startSwipe('${m.id}')">
                <div class="mc-thumb ${isComp ? 'done' : ''}" style="background-image:url('${m.thumb}')"></div>
                <div class="mc-info">
                    <div class="mc-title">
                        <span>${m.title}</span>
                        <span class="mc-medal ${isComp ? 'active' : ''}">ğŸ…</span>
                    </div>
                    <div class="mc-prog-text">${m.done}/${m.total} ä»¶ã‚’ç¢ºèªæ¸ˆã¿</div>
                    <div class="mc-prog-bar"><div class="mc-prog-fill" style="width: ${pct}%"></div></div>
                </div>
            </div>
        `;
    }).join('');
}

function go(id) {
    currentView = id;
    document.querySelectorAll('.view').forEach(v => v.classList.remove('active'));
    document.getElementById(id).classList.add('active');
    
    const titles = { home:'ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸', all:'ã™ã¹ã¦ã®å†™çœŸ', swipe:'å†™çœŸã‚’ã‚¹ãƒ¯ã‚¤ãƒ—', similar:'ãƒ¡ãƒ¼ãƒ«', raw:'ã‚¯ãƒ©ã‚¦ãƒ‰', ss:'è¿½åŠ ', videos:'å‹•ç”»' };
    document.getElementById('title').innerText = titles[id] || id;

    const backBtn = document.getElementById('back');
    const actBtn = document.getElementById('act');
    const gearBtn = document.getElementById('gear');
    
    if (id === 'home' || id === 'swipe') {
        backBtn.style.display = 'none';
        actBtn.style.display = 'none';
        gearBtn.style.display = 'flex';
        
        if (id === 'swipe') {
            document.getElementById('swipe-list-view').style.display = 'block';
            document.getElementById('swipe-play').style.display = 'none';
        }
    } else {
        backBtn.style.display = 'block';
        actBtn.style.display = (id === 'all') ? 'flex' : 'none';
        gearBtn.style.display = 'none';
    }
}

function goBack() {
    if (document.getElementById('swipe-play').style.display === 'flex') {
        // ã‚¹ãƒ¯ã‚¤ãƒ—ãƒ—ãƒ¬ã‚¤ä¸­ãªã‚‰æœˆåˆ¥ãƒªã‚¹ãƒˆã¸æˆ»ã‚‹
        go('swipe');
    } else {
        go('home');
        document.querySelectorAll('.ni').forEach(x => x.classList.remove('on'));
        document.querySelector('.ni[data-t="home"]').classList.add('on');
    }
}

// ----- ã‚¹ãƒ¯ã‚¤ãƒ—ãƒ—ãƒ¬ã‚¤æ©Ÿèƒ½ -----
function startSwipe(monthId) {
    const month = SWIPE_MONTHS.find(m => m.id === monthId);
    if (month.done >= month.total) {
        alert("ã“ã®æœˆã¯ã™ã§ã«æ•´ç†å®Œäº†ã—ã¦ã„ã¾ã™ï¼");
        return;
    }
    
    swipeActiveMonth = month;
    // ãƒ‡ãƒ¢ç”¨ã«æ®‹ã‚Šã®æœªç¢ºèªä»¶æ•°åˆ†ã®ç”»åƒã‚’ALL_PHOTOSã‹ã‚‰ãƒ©ãƒ³ãƒ€ãƒ ã«ç”Ÿæˆã™ã‚‹ãƒ•ãƒª
    swipeImages = [...ALL_PHOTOS, ...ALL_PHOTOS].sort(() => 0.5 - Math.random());
    
    document.getElementById('title').innerText = month.title;
    document.getElementById('back').style.display = 'block';
    document.getElementById('gear').style.display = 'none';
    
    document.getElementById('swipe-list-view').style.display = 'none';
    document.getElementById('swipe-play').style.display = 'flex';
    
    updateSwipeCard();
}

function updateSwipeCard() {
    const month = swipeActiveMonth;
    if (!month) return;
    
    // UIæ›´æ–°
    document.getElementById('sp-curr').innerText = month.done;
    document.getElementById('sp-total').innerText = month.total;
    const pct = (month.done / month.total) * 100;
    document.getElementById('sp-prog-bar').style.width = pct + '%';
    
    if (month.done >= month.total || swipeImages.length === 0) {
        // å®Œäº†å‡¦ç†
        renderSwipeList(); // ãƒªã‚¹ãƒˆã®é€²æ—æ›´æ–°
        alert("ã“ã®æœˆã®æ•´ç†ãŒå®Œäº†ã—ã¾ã—ãŸï¼ç´ æ™´ã‚‰ã—ã„ï¼ğŸ‰");
        goBack();
        return;
    }
    
    // ç”»åƒã‚»ãƒƒãƒˆ
    const imgEl = document.getElementById('sp-img');
    const currentImg = swipeImages[0];
    
    // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒªã‚»ãƒƒãƒˆ
    imgEl.className = 'sp-img'; 
    setTimeout(() => {
        imgEl.src = currentImg.src;
        document.getElementById('sp-size').innerText = currentImg.sz + " MB";
    }, 50);
}

function handleSwipe(action) {
    const imgEl = document.getElementById('sp-img');
    
    // CSSã§ã‚¹ãƒ¯ã‚¤ãƒ—ã—ã¦æ¶ˆãˆã‚‹ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
    if (action === 'del') {
        imgEl.classList.add('swipe-left');
        // â€»å®Ÿéš›ã®ã‚¢ãƒ—ãƒªãªã‚‰ã“ã“ã§å‰Šé™¤APIã‚’å‘¼ã¶ã‹ã€å‰Šé™¤ãƒªã‚¹ãƒˆã«è¿½åŠ ã™ã‚‹
    } else {
        imgEl.classList.add('swipe-right');
    }
    
    // é€²æ—ã‚’é€²ã‚ã‚‹
    swipeActiveMonth.done += 1;
    swipeImages.shift(); // æœ€åˆã®ç”»åƒã‚’å‰Šé™¤
    
    // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³å®Œäº†å¾Œã«æ¬¡ã®ç”»åƒã¸
    setTimeout(() => {
        updateSwipeCard();
    }, 300);
}

document.addEventListener('DOMContentLoaded', init);
</script>
</body>
</html>
