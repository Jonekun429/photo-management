<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cleaner App</title>
    <style>
        :root {
            --bg:           #0a100e;
            --card:         #111f1b;
            --card-2:       #162520;
            --border:       rgba(0, 180, 130, 0.10);
            --text:         #e6f5f1;
            --text-sub:     #5e9c89;
            --primary:      #005D4D;
            --primary-mid:  #007a65;
            --primary-glow: #00c49a;
            --accent:       #00e8b5;
            --danger:       #e05252;
            --gold:         #ffd166;
            --badge-dark:   rgba(0,0,0,0.6);
        }

        * { box-sizing: border-box; margin: 0; padding: 0; -webkit-tap-highlight-color: transparent;
            font-family: -apple-system, BlinkMacSystemFont, "Hiragino Sans", "Noto Sans JP", sans-serif; }
        body { background: #000; display: flex; justify-content: center; height: 100vh; overflow: hidden; }

        #app { width: 100%; max-width: 1200px; height: 100%; background: var(--bg); color: var(--text);
               display: flex; flex-direction: column; margin: 0 auto; position: relative; }

        header {
            padding: 36px 20px 14px;
            display: flex; flex-direction: column; gap: 12px;
            background: var(--bg);
            flex-shrink: 0; z-index: 20;
            border-bottom: 1px solid var(--border);
        }
        .header-top { display: flex; justify-content: space-between; align-items: center; min-height: 34px; }
        .back-btn { font-size: 18px; cursor: pointer; display: none; color: var(--accent); font-weight: 700; padding-right: 12px; letter-spacing: -1px; }
        .header-actions { display: none; gap: 8px; align-items: center; }
        .pill-btn { background: rgba(0,200,154,0.12); border: 1px solid rgba(0,200,154,0.25); color: var(--accent); border-radius: 20px; padding: 7px 14px; font-size: 12px; font-weight: 700; cursor: pointer; display: flex; align-items: center; gap: 5px; transition: background 0.2s; }
        .pill-btn:active { background: rgba(0,200,154,0.22); }
        .icon-btn { background: rgba(0,200,154,0.1); border: 1px solid rgba(0,200,154,0.2); color: var(--accent); width: 34px; height: 34px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 15px; cursor: pointer; }
        .header-title-row { display: flex; align-items: flex-end; gap: 10px; }
        h1 { font-size: 26px; font-weight: 800; letter-spacing: -0.3px; }
        .header-sub { font-size: 12px; color: var(--text-sub); display: none; padding-bottom: 2px; }

        .view { flex: 1; overflow-y: auto; padding: 18px; display: none; }
        .view.active { display: block; }

        .delete-bar-wrap { position: absolute; bottom: 82px; left: 0; width: 100%; padding: 0 18px; display: flex; justify-content: center; z-index: 30; transform: translateY(150%); transition: transform 0.32s cubic-bezier(0.25, 0.8, 0.25, 1); pointer-events: none; }
        .delete-bar-wrap.show { transform: translateY(0); pointer-events: auto; }
        .btn-delete { width: 100%; max-width: 520px; padding: 15px 20px; background: linear-gradient(135deg, var(--danger) 0%, #c03c3c 100%); color: #fff; border: none; border-radius: 16px; font-size: 15px; font-weight: 700; cursor: pointer; box-shadow: 0 6px 24px rgba(224,82,82,0.4); display: flex; justify-content: center; align-items: center; gap: 8px; }

        .selectable-item { position: relative; cursor: pointer; border: 2px solid transparent; transition: transform 0.1s, opacity 0.1s; overflow: hidden; background: var(--card); }
        .selectable-item.selected { transform: scale(0.91); opacity: 0.75; border-radius: 12px; }
        .check-box { position: absolute; bottom: 8px; right: 8px; width: 22px; height: 22px; border: 2px solid rgba(255,255,255,0.7); border-radius: 6px; display: flex; align-items: center; justify-content: center; color: transparent; font-size: 13px; font-weight: 800; background: rgba(0,0,0,0.25); z-index: 10; transition: all 0.2s; }
        .selectable-item.selected .check-box { background: var(--danger); border-color: var(--danger); color: #fff; }

        .badge-top    { position: absolute; top: 7px; left: 7px; background: var(--badge-dark); border: 1px solid rgba(255,255,255,0.25); color: #fff; font-size: 9px; font-weight: 800; padding: 2px 6px; border-radius: 4px; z-index: 2; letter-spacing: 0.5px; }
        .badge-bottom { position: absolute; bottom: 7px; left: 7px; background: var(--badge-dark); color: #fff; font-size: 11px; font-weight: 700; padding: 3px 6px; border-radius: 4px; z-index: 2; }
        .video-badge  { position: absolute; bottom: 7px; left: 7px; background: rgba(0,93,77,0.85); border-radius: 6px; padding: 4px 7px; display: flex; flex-direction: column; z-index: 2; }
        .video-badge .vsize { font-size: 12px; font-weight: 700; color: #fff; line-height: 1.2; }
        .video-badge .vdur  { font-size: 10px; color: var(--accent); line-height: 1.2; }

        .storage-row { display: flex; justify-content: space-between; font-size: 12px; margin-bottom: 8px; }
        .storage-row .used { color: var(--accent); font-weight: 700; }
        .storage-row .pct  { color: var(--text-sub); }
        .progress-track { width: 100%; height: 6px; background: var(--card); border-radius: 3px; margin-bottom: 22px; overflow: hidden; }
        .progress-fill  { width: 82%; height: 100%; background: linear-gradient(90deg, var(--primary), var(--accent)); border-radius: 3px; }

        .home-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); gap: 14px; }
        .home-card { border-radius: 22px; height: 158px; position: relative; overflow: hidden; display: flex; flex-direction: column; justify-content: flex-end; padding: 16px; cursor: pointer; background-size: cover; background-position: center; transition: transform 0.2s; }
        .home-card:active { transform: scale(0.97); }
        .home-card::before { content: ''; position: absolute; inset: 0; background: linear-gradient(to top, rgba(0,0,0,0.88) 0%, rgba(0,0,0,0.18) 55%, transparent 100%); z-index: 1; }
        .home-card::after  { content: ''; position: absolute; inset: 0; background: rgba(0,93,77,0.18); z-index: 1; }
        .home-card-inner { position: relative; z-index: 2; }
        .home-card h3 { font-size: 13px; font-weight: 500; color: rgba(255,255,255,0.8); margin-bottom: 4px; }
        .home-card p  { font-size: 24px; font-weight: 800; color: #fff; letter-spacing: -0.5px; }
        .home-card.photos      { background-image: url('https://images.unsplash.com/photo-1531306728370-53bfd6202e88?w=600&q=80'); }
        .home-card.raw         { background-image: url('https://images.unsplash.com/photo-1516807869374-4b53db6fcbf4?w=600&q=80'); }
        .home-card.videos      { background-image: url('https://images.unsplash.com/photo-1535016120720-40c68798625c?w=600&q=80'); }
        .home-card.screenshots { background-image: url('https://images.unsplash.com/photo-1550745165-9bc0b252726f?w=600&q=80'); }

        .media-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(108px, 1fr)); gap: 6px; padding-bottom: 60px; }
        .media-item { border-radius: 12px; aspect-ratio: 1/1; position: relative; }
        .media-item img { width: 100%; height: 100%; object-fit: cover; display: block; border-radius: inherit; }

        .sim-group { margin-bottom: 28px; }
        .sim-group-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; }
        .sim-group-title { font-size: 14px; font-weight: 700; }
        .grp-sel-btn { font-size: 12px; color: var(--text-sub); cursor: pointer; }
        .grp-sel-btn:active { color: var(--accent); }
        .sim-scroll { display: flex; overflow-x: auto; gap: 10px; padding-bottom: 8px; scroll-snap-type: x mandatory; -webkit-overflow-scrolling: touch; }
        .sim-scroll::-webkit-scrollbar { height: 4px; }
        .sim-scroll::-webkit-scrollbar-thumb { background: var(--card-2); border-radius: 2px; }
        .sim-best { flex: 0 0 154px; aspect-ratio: 3/4; border-radius: 16px; position: relative; overflow: hidden; scroll-snap-align: start; }
        .sim-best img { width: 100%; height: 100%; object-fit: cover; }
        .best-label { position: absolute; bottom: 9px; left: 9px; background: rgba(0,93,77,0.9); color: #fff; font-size: 11px; font-weight: 700; padding: 4px 8px; border-radius: 6px; z-index: 2; display: flex; align-items: center; gap: 3px; }
        .best-label .star { color: var(--accent); font-size: 12px; }
        .sim-sub { flex: 0 0 116px; aspect-ratio: 3/4; scroll-snap-align: start; }

        .swipe-header { margin-bottom: 18px; }
        .swipe-header h2 { font-size: 21px; font-weight: 800; }
        .swipe-header p { font-size: 12px; color: var(--text-sub); margin-top: 3px; }
        .month-list { display: flex; flex-direction: column; gap: 10px; padding-bottom: 20px; }
        .month-card { background: var(--card); border-radius: 18px; overflow: hidden; cursor: pointer; transition: transform 0.15s; position: relative; border: 1px solid var(--border); }
        .month-card:active { transform: scale(0.975); }
        .month-card-inner { display: flex; align-items: center; gap: 12px; padding: 14px 16px; }
        .month-thumbs { display: flex; gap: 3px; flex-shrink: 0; }
        .month-thumb { width: 46px; height: 62px; border-radius: 8px; object-fit: cover; background: var(--card-2); }
        .month-thumb:nth-child(2) { width: 38px; opacity: 0.65; }
        .month-thumb:nth-child(3) { width: 30px; opacity: 0.35; }
        .month-info { flex: 1; min-width: 0; }
        .month-label { font-size: 15px; font-weight: 700; margin-bottom: 3px; }
        .month-count { font-size: 11px; color: var(--text-sub); margin-bottom: 7px; }
        .month-prog-track { width: 100%; height: 3px; background: rgba(255,255,255,0.08); border-radius: 2px; overflow: hidden; }
        .month-prog-fill  { height: 100%; border-radius: 2px; background: linear-gradient(90deg, var(--primary-mid), var(--accent)); transition: width 0.5s ease; }
        .month-badge { flex-shrink: 0; width: 42px; height: 42px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 20px; }
        .month-badge.done { background: radial-gradient(circle at 40% 35%, #fff8d6, #ffd700 60%, #c8930a); box-shadow: 0 0 14px rgba(255,215,0,0.5); animation: glow 2.5s ease-in-out infinite; }
        .month-badge.pend { background: rgba(255,255,255,0.05); border: 1.5px solid rgba(255,255,255,0.08); font-size: 12px; color: var(--text-sub); }
        @keyframes glow { 0%,100% { box-shadow: 0 0 10px rgba(255,215,0,0.38); } 50% { box-shadow: 0 0 20px rgba(255,215,0,0.72); } }
        .month-card.done-card { background: linear-gradient(135deg, #0e2420, #122b25); border-color: rgba(0,200,140,0.15); }
        .month-card.done-card .month-label { color: var(--accent); }
        .done-banner { background: linear-gradient(90deg, rgba(0,200,140,0.10), transparent); padding: 6px 16px; font-size: 11px; font-weight: 600; color: rgba(0,232,181,0.8); border-top: 1px solid rgba(0,200,140,0.1); letter-spacing: 0.3px; }

        .guide-section { margin-bottom: 26px; }
        .guide-section-ttl { font-size: 11px; font-weight: 700; color: var(--text-sub); text-transform: uppercase; letter-spacing: 1.2px; margin-bottom: 10px; }
        .guide-card { background: var(--card); border-radius: 16px; overflow: hidden; border: 1px solid var(--border); }
        .guide-item { display: flex; align-items: center; gap: 13px; padding: 15px 16px; border-bottom: 1px solid var(--border); }
        .guide-item:last-child { border-bottom: none; }
        .guide-icon { width: 40px; height: 40px; border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 19px; flex-shrink: 0; }
        .guide-text h4 { font-size: 14px; font-weight: 600; margin-bottom: 2px; }
        .guide-text p  { font-size: 11px; color: var(--text-sub); line-height: 1.45; }
        .guide-arr { margin-left: auto; color: var(--text-sub); font-size: 16px; flex-shrink: 0; }

        nav { height: 78px; background: rgba(10,20,17,0.96); backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px); display: flex; justify-content: space-around; align-items: center; padding-bottom: 12px; border-top: 1px solid var(--border); flex-shrink: 0; z-index: 40; }
        .nav-item { display: flex; flex-direction: column; align-items: center; color: var(--text-sub); font-size: 10px; font-weight: 600; cursor: pointer; width: 80px; transition: color 0.2s; }
        .nav-item.active { color: var(--accent); }
        .nav-icon { font-size: 23px; margin-bottom: 3px; }
        .nav-item.active .nav-icon { filter: drop-shadow(0 0 6px rgba(0,232,181,0.5)); }
    </style>
</head>
<body>
<div id="app">
    <header>
        <div class="header-top">
            <div id="back-btn" class="back-btn" onclick="switchTab('home')">â€¹ æˆ»ã‚‹</div>
            <div id="header-actions" class="header-actions">
                <button class="icon-btn">â‰¡</button>
                <button class="pill-btn" id="select-all-btn" onclick="toggleSelectAll()">âœ“ å…¨ã¦é¸æŠã™ã‚‹</button>
            </div>
        </div>
        <div class="header-title-row">
            <h1 id="header-title">ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸</h1>
            <div id="header-sub" class="header-sub"></div>
        </div>
    </header>

    <main id="home" class="view active">
        <div class="storage-row">
            <span class="used">1,640 GB ã‚’ä½¿ç”¨ä¸­ : å…¨ 2,000 GB</span>
            <span class="pct">82% ä½¿ç”¨æ¸ˆã¿</span>
        </div>
        <div class="progress-track"><div class="progress-fill"></div></div>
        <div class="home-grid">
            <div class="home-card photos"      onclick="switchTab('similar-photos')"><div class="home-card-inner"><h3>ä¼¼ã¦ã„ã‚‹å†™çœŸ</h3><p>24.4 GB</p></div></div>
            <div class="home-card raw"         onclick="switchTab('raw-photos')"    ><div class="home-card-inner"><h3>RAWãƒ‡ãƒ¼ã‚¿</h3><p>128 GB</p></div></div>
            <div class="home-card videos"      onclick="switchTab('videos')"        ><div class="home-card-inner"><h3>å‹•ç”»ã‚’æ•´ç†</h3><p>299 GB</p></div></div>
            <div class="home-card screenshots" onclick="switchTab('screenshots')"   ><div class="home-card-inner"><h3>ã‚¹ã‚¯ã‚·ãƒ§</h3><p>1.8 GB</p></div></div>
        </div>
    </main>

    <main id="raw-photos" class="view"><div id="raw-grid" class="media-grid"></div></main>
    <main id="videos" class="view"><div id="video-grid" class="media-grid"></div></main>
    <main id="screenshots" class="view"><div id="screenshot-grid" class="media-grid"></div></main>
    <main id="similar-photos" class="view"><div id="similar-container" style="padding-bottom:60px;"></div></main>

    <main id="swipe" class="view" style="padding:16px;padding-bottom:80px;">
        <div class="swipe-header"><h2>æœˆåˆ¥ã‚¹ãƒ¯ã‚¤ãƒ—</h2><p>æœˆã”ã¨ã«å†™çœŸã‚’ç¢ºèªã—ã¦æ•´ç†ã—ã¾ã—ã‚‡ã†</p></div>
        <div class="month-list" id="month-list"></div>
    </main>

    <main id="guide" class="view" style="padding:18px;padding-bottom:80px;">
        <div style="margin-bottom:22px;">
            <h2 style="font-size:22px;font-weight:800;">ä½¿ã„æ–¹ã‚¬ã‚¤ãƒ‰</h2>
            <p style="font-size:12px;color:var(--text-sub);margin-top:4px;">ã‚¢ãƒ—ãƒªã®æ©Ÿèƒ½ã¨ä½¿ã„æ–¹ã‚’ã”æ¡ˆå†…ã—ã¾ã™</p>
        </div>
        <div class="guide-section">
            <div class="guide-section-ttl">åŸºæœ¬æ©Ÿèƒ½</div>
            <div class="guide-card">
                <div class="guide-item"><div class="guide-icon" style="background:rgba(0,93,77,0.25);">ğŸ“·</div><div class="guide-text"><h4>ä¼¼ã¦ã„ã‚‹å†™çœŸã‚’æ•´ç†</h4><p>åŒã˜ã‚·ãƒ¼ãƒ³ã§æ’®å½±ã—ãŸé¡ä¼¼å†™çœŸã‚’ã‚°ãƒ«ãƒ¼ãƒ—åŒ–ã—ã¦ã€æœ€é«˜ã®1æšã ã‘ã‚’æ®‹ã›ã¾ã™ã€‚</p></div><div class="guide-arr">â€º</div></div>
                <div class="guide-item"><div class="guide-icon" style="background:rgba(0,93,77,0.25);">ğŸ¬</div><div class="guide-text"><h4>å‹•ç”»ã‚’æ•´ç†ã™ã‚‹</h4><p>ã‚µã‚¤ã‚ºã‚„é•·ã•ã§å‹•ç”»ã‚’çµã‚Šè¾¼ã¿ã€ä¸è¦ãªå‹•ç”»ã‚’ç´ æ—©ãå‰Šé™¤ã§ãã¾ã™ã€‚</p></div><div class="guide-arr">â€º</div></div>
                <div class="guide-item"><div class="guide-icon" style="background:rgba(0,93,77,0.25);">ğŸ“„</div><div class="guide-text"><h4>RAWãƒ‡ãƒ¼ã‚¿ã‚’å‰Šé™¤</h4><p>RAW+JPEGã§æ’®å½±ã—ãŸå ´åˆã€JPEGã‚’æ®‹ã—ã¦RAWãƒ•ã‚¡ã‚¤ãƒ«ã ã‘ã‚’å‰Šé™¤ã§ãã¾ã™ã€‚</p></div><div class="guide-arr">â€º</div></div>
                <div class="guide-item"><div class="guide-icon" style="background:rgba(0,93,77,0.25);">ğŸ–¼ï¸</div><div class="guide-text"><h4>ã‚¹ã‚¯ã‚·ãƒ§ã‚’ä¸€æ‹¬å‰Šé™¤</h4><p>ä¸è¦ãªã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã‚’ã¾ã¨ã‚ã¦ç¢ºèªãƒ»å‰Šé™¤ã§ãã¾ã™ã€‚</p></div><div class="guide-arr">â€º</div></div>
            </div>
        </div>
        <div class="guide-section">
            <div class="guide-section-ttl">ã‚¹ãƒ¯ã‚¤ãƒ—æ©Ÿèƒ½</div>
            <div class="guide-card">
                <div class="guide-item"><div class="guide-icon" style="background:rgba(255,215,0,0.12);">ğŸ†</div><div class="guide-text"><h4>æœˆåˆ¥ã‚¹ãƒ¯ã‚¤ãƒ—ã§æ•´ç†</h4><p>æœˆã”ã¨ã«å†™çœŸã‚’ã‚¹ãƒ¯ã‚¤ãƒ—ã—ã¦ä¿å­˜ãƒ»å‰Šé™¤ã‚’åˆ¤æ–­ã€‚å…¨ä»¶å®Œäº†ã™ã‚‹ã¨ğŸ†ãƒãƒ¼ã‚¯ãŒä»˜ãã¾ã™ã€‚</p></div><div class="guide-arr">â€º</div></div>
                <div class="guide-item"><div class="guide-icon" style="background:rgba(224,82,82,0.15);">â¬…ï¸</div><div class="guide-text"><h4>å·¦ã‚¹ãƒ¯ã‚¤ãƒ—ã§å‰Šé™¤</h4><p>ä¸è¦ãªå†™çœŸã¯å·¦ã«ã‚¹ãƒ¯ã‚¤ãƒ—ã—ã¦å‰Šé™¤ã‚­ãƒ¥ãƒ¼ã«è¿½åŠ ã—ã¾ã™ã€‚</p></div><div class="guide-arr">â€º</div></div>
                <div class="guide-item"><div class="guide-icon" style="background:rgba(0,200,154,0.12);">â¡ï¸</div><div class="guide-text"><h4>å³ã‚¹ãƒ¯ã‚¤ãƒ—ã§ä¿å­˜</h4><p>æ®‹ã—ãŸã„å†™çœŸã¯å³ã«ã‚¹ãƒ¯ã‚¤ãƒ—ã—ã¦ä¿å­˜ã—ã¾ã™ã€‚</p></div><div class="guide-arr">â€º</div></div>
            </div>
        </div>
        <div class="guide-section">
            <div class="guide-section-ttl">ãƒ’ãƒ³ãƒˆ</div>
            <div class="guide-card">
                <div class="guide-item"><div class="guide-icon" style="background:rgba(0,93,77,0.25);">ğŸ’¡</div><div class="guide-text"><h4>å®šæœŸçš„ãªæ•´ç†ãŒãŠã™ã™ã‚</h4><p>æœˆã«1åº¦ã‚¹ãƒ¯ã‚¤ãƒ—ã§æ•´ç†ã™ã‚‹ã¨ã€ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚’å¸¸ã«å¿«é©ã«ä¿ã¦ã¾ã™ã€‚</p></div><div class="guide-arr">â€º</div></div>
            </div>
        </div>
    </main>

    <div id="delete-bar" class="delete-bar-wrap">
        <button class="btn-delete" onclick="deleteSelectedItems()">
            <span>ğŸ—‘</span><span id="delete-btn-text">å‰Šé™¤</span>
        </button>
    </div>

    <nav>
        <div class="nav-item active" data-target="home"><div class="nav-icon">ğŸ </div><span>ãƒ›ãƒ¼ãƒ </span></div>
        <div class="nav-item" data-target="swipe"><div class="nav-icon">ğŸ‘†</div><span>ã‚¹ãƒ¯ã‚¤ãƒ—</span></div>
        <div class="nav-item" data-target="guide"><div class="nav-icon">ğŸ“–</div><span>ã‚¬ã‚¤ãƒ‰</span></div>
    </nav>
</div>

<script>
const imgPool = [
    'https://images.unsplash.com/photo-1531306728370-53bfd6202e88',
    'https://images.unsplash.com/photo-1550745165-9bc0b252726f',
    'https://images.unsplash.com/photo-1511895426328-dc8714191300',
    'https://images.unsplash.com/photo-1611162617474-5b21e879e113',
    'https://images.unsplash.com/photo-1529626455594-4ff0802cfb7e',
    'https://images.unsplash.com/photo-1504274066651-8d31a536b11a',
    'https://images.unsplash.com/photo-1516807869374-4b53db6fcbf4',
    'https://images.unsplash.com/photo-1492691527719-9d1c255998b3',
    'https://images.unsplash.com/photo-1520697921389-9a2f647035ce'
];

function genData(count, type) {
    return Array.from({length: count}, (_, i) => {
        const src = `${imgPool[i % imgPool.length]}?w=300&q=80&r=${i}`;
        if (type === 'raw')   return { src, size: (Math.random()*50+20).toFixed(1) };
        if (type === 'video') return { src, size: (Math.random()*5+0.5).toFixed(2), dur: `0${Math.floor(Math.random()*9)}:${String(Math.floor(Math.random()*50)+10).padStart(2,'0')}` };
        return { src, size: (Math.random()*4+1).toFixed(1) };
    });
}
function genSimilar(n) {
    return Array.from({length: n}, (_, i) => {
        const base = imgPool[i % imgPool.length];
        const sub = Array.from({length: Math.floor(Math.random()*3)+2}, (__, j) => ({ src: `${base}?w=300&q=60&r=${i}${j}`, size: (Math.random()*3+1).toFixed(1) }));
        return { id:`g${i}`, best: { src:`${base}?w=300&q=80`, size:(Math.random()*4+2).toFixed(1) }, sub };
    });
}
function genMonths() {
    const now = new Date();
    return Array.from({length: 20}, (_, i) => {
        const d = new Date(now.getFullYear(), now.getMonth()-i, 1);
        const total = Math.floor(Math.random()*120)+30;
        const reviewed = i < 3 ? Math.floor(Math.random()*total) : (Math.random()>0.4 ? total : Math.floor(Math.random()*total));
        return { label: `${d.getFullYear()}å¹´${d.getMonth()+1}æœˆ`, total, reviewed, done: reviewed===total, thumbs: [0,1,2].map(j => `${imgPool[(i+j)%imgPool.length]}?w=100&q=60&r=${i}${j}`) };
    });
}

const rawData = genData(30,'raw'), videoData = genData(20,'video'), screenshotData = genData(50,'photo');
const similarGroups = genSimilar(15), monthData = genMonths();
let currentTab = 'home', isAllSelected = false;

document.addEventListener('DOMContentLoaded', () => {
    renderGrids(); renderSimilar(); renderMonths();
    document.querySelectorAll('.nav-item[data-target]').forEach(el => el.addEventListener('click', () => switchTab(el.dataset.target)));
    switchTab('home');
});

function renderGrids() {
    document.getElementById('raw-grid').innerHTML = rawData.map(d => `<div class="media-item selectable-item" data-size="${d.size}" onclick="toggleSelect(this)"><img src="${d.src}" loading="lazy"><div class="badge-top">RAW</div><div class="badge-bottom">${d.size} MB</div><div class="check-box">âœ“</div></div>`).join('');
    document.getElementById('video-grid').innerHTML = videoData.map(d => `<div class="media-item selectable-item" data-size="${d.size*1000}" onclick="toggleSelect(this)"><img src="${d.src}" loading="lazy"><div class="video-badge"><span class="vsize">${d.size} GB</span><span class="vdur">${d.dur}</span></div><div class="check-box">âœ“</div></div>`).join('');
    document.getElementById('screenshot-grid').innerHTML = screenshotData.map(d => `<div class="media-item selectable-item" data-size="${d.size}" onclick="toggleSelect(this)"><img src="${d.src}" loading="lazy"><div class="check-box">âœ“</div></div>`).join('');
}
function renderSimilar() {
    document.getElementById('similar-container').innerHTML = similarGroups.map(g => `<div class="sim-group" id="${g.id}"><div class="sim-group-header"><span class="sim-group-title">${g.sub.length} ä¼¼ã¦ã„ã¾ã™</span><span class="grp-sel-btn" onclick="toggleGroupSelect('${g.id}')">ã™ã¹ã¦ã®é¸æŠã‚’è§£é™¤</span></div><div class="sim-scroll"><div class="sim-best"><div class="best-label"><span class="star">â˜…</span> æœ€é«˜</div><img src="${g.best.src}" loading="lazy"></div>${g.sub.map(s => `<div class="media-item sim-sub selectable-item selected" data-size="${s.size}" onclick="toggleSelect(this)"><img src="${s.src}" loading="lazy"><div class="badge-bottom" style="font-size:10px;">${s.size} MB</div><div class="check-box">âœ“</div></div>`).join('')}</div></div>`).join('');
}
function renderMonths() {
    document.getElementById('month-list').innerHTML = monthData.map((m, i) => {
        const pct = m.total > 0 ? (m.reviewed/m.total*100).toFixed(0) : 0;
        const thumbs = m.thumbs.map(t => `<img class="month-thumb" src="${t}" loading="lazy">`).join('');
        const badge = m.done ? `<div class="month-badge done">ğŸ†</div>` : `<div class="month-badge pend">${pct}%</div>`;
        const count = m.done ? `<span style="color:rgba(0,232,181,0.85);font-weight:700;">âœ“ å…¨${m.total}ä»¶ å®Œäº†</span>` : `<span>${m.reviewed}/${m.total}ä»¶ã‚’ç¢ºèªæ¸ˆã¿</span>`;
        const banner = m.done ? `<div class="done-banner">ğŸ† ã“ã®ã²ã¨æœˆã®æ•´ç†ãŒå®Œäº†ã—ã¾ã—ãŸï¼</div>` : '';
        return `<div class="month-card ${m.done?'done-card':''}" onclick="onMonthClick(${i})"><div class="month-card-inner"><div class="month-thumbs">${thumbs}</div><div class="month-info"><div class="month-label">${m.label}</div><div class="month-count">${count}</div><div class="month-prog-track"><div class="month-prog-fill" style="width:${pct}%"></div></div></div>${badge}</div>${banner}</div>`;
    }).join('');
}
function onMonthClick(i) { console.log(monthData[i].label + ' ã‚¹ãƒ¯ã‚¤ãƒ—é–‹å§‹'); }
function switchTab(id) {
    currentTab = id;
    document.querySelectorAll('.view').forEach(v => v.classList.remove('active'));
    document.getElementById(id).classList.add('active');
    document.querySelectorAll('.nav-item[data-target]').forEach(n => n.classList.toggle('active', n.dataset.target === id));
    const title = document.getElementById('header-title'), sub = document.getElementById('header-sub'), back = document.getElementById('back-btn'), actions = document.getElementById('header-actions');
    sub.style.display='block'; back.style.display='block'; actions.style.display='flex';
    document.getElementById('delete-bar').classList.remove('show');
    checkSelectAllState();
    const topPages = ['home','swipe','guide'];
    if (topPages.includes(id)) { sub.style.display='none'; back.style.display='none'; actions.style.display='none'; }
    const titles = { home:'ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸', swipe:'ã‚¹ãƒ¯ã‚¤ãƒ—', guide:'ã‚¬ã‚¤ãƒ‰', 'raw-photos':'RAW', 'similar-photos':'ä¼¼ã¦ã„ã¾ã™', videos:'å‹•ç”»ã‚’æ•´ç†', screenshots:'ã‚¹ã‚¯ã‚·ãƒ§' };
    const subs = { 'raw-photos':`${rawData.length}å€‹ã®é …ç›®`, 'similar-photos':'1,088æšã®å†™çœŸ (24.4 GB)', videos:`${videoData.length} ã‚¢ã‚¤ãƒ†ãƒ  (299 GB)`, screenshots:`${screenshotData.length}æšã®å†™çœŸ (193 MB)` };
    title.innerText = titles[id] || id;
    if (subs[id]) sub.innerText = subs[id];
    if (!topPages.includes(id)) updateDeleteButton();
}
function toggleSelect(el) { el.classList.toggle('selected'); checkSelectAllState(); updateDeleteButton(); }
function toggleGroupSelect(gid) {
    const g = document.getElementById(gid), btn = g.querySelector('.grp-sel-btn'), selecting = btn.innerText === 'å…¨ã¦é¸æŠã™ã‚‹';
    g.querySelectorAll('.selectable-item').forEach(el => el.classList.toggle('selected', selecting));
    btn.innerText = selecting ? 'ã™ã¹ã¦ã®é¸æŠã‚’è§£é™¤' : 'å…¨ã¦é¸æŠã™ã‚‹';
    checkSelectAllState(); updateDeleteButton();
}
function toggleSelectAll() {
    const view = document.querySelector('.view.active'); isAllSelected = !isAllSelected;
    view.querySelectorAll('.selectable-item').forEach(el => el.classList.toggle('selected', isAllSelected));
    updateSelectAllBtn(); updateDeleteButton();
}
function checkSelectAllState() {
    const view = document.querySelector('.view.active'); if (!view) return;
    const total = view.querySelectorAll('.selectable-item').length, sel = view.querySelectorAll('.selectable-item.selected').length;
    isAllSelected = total > 0 && total === sel; updateSelectAllBtn();
}
function updateSelectAllBtn() {
    const btn = document.getElementById('select-all-btn');
    if (isAllSelected) { btn.innerHTML='âŠ— ã™ã¹ã¦ã®é¸æŠã‚’è§£é™¤'; document.querySelectorAll('.grp-sel-btn').forEach(e => e.innerText='ã™ã¹ã¦ã®é¸æŠã‚’è§£é™¤'); }
    else { btn.innerHTML='âœ“ å…¨ã¦é¸æŠã™ã‚‹'; document.querySelectorAll('.grp-sel-btn').forEach(e => e.innerText='å…¨ã¦é¸æŠã™ã‚‹'); }
}
function updateDeleteButton() {
    const view = document.querySelector('.view.active'); if (!view || ['home','swipe','guide'].includes(currentTab)) return;
    const sel = view.querySelectorAll('.selectable-item.selected'), bar = document.getElementById('delete-bar'), txt = document.getElementById('delete-btn-text');
    if (sel.length > 0) {
        let mb = 0; sel.forEach(el => mb += parseFloat(el.dataset.size||0));
        const sz = mb > 1000 ? `${(mb/1000).toFixed(2)} GB` : `${mb.toFixed(1)} MB`;
        const labels = { 'raw-photos':'RAWãƒ‡ãƒ¼ã‚¿', 'similar-photos':'é¡ä¼¼ã‚¢ã‚¤ãƒ†ãƒ ', videos:'å‹•ç”»', screenshots:'ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ' };
        txt.innerText = `${sel.length}ä»¶ã®${labels[currentTab]||'ã‚¢ã‚¤ãƒ†ãƒ '}ã‚’å‰Šé™¤ (${sz})`; bar.classList.add('show');
    } else { bar.classList.remove('show'); }
}
function deleteSelectedItems() {
    const view = document.querySelector('.view.active'), sel = view.querySelectorAll('.selectable-item.selected');
    sel.forEach(el => { el.style.transform='scale(0.5)'; el.style.opacity='0'; el.style.transition='all 0.25s'; });
    setTimeout(() => {
        sel.forEach(el => el.remove());
        if (currentTab === 'similar-photos') document.querySelectorAll('.sim-group').forEach(g => { if (!g.querySelector('.sim-sub')) g.style.display='none'; });
        updateDeleteButton();
        if (!view.querySelector('.selectable-item')) switchTab('home');
    }, 280);
}
</script>
</body>
</html>
